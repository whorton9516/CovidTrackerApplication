{"version":3,"file":"kendo.slider.min.js","sources":["kendo.slider.js"],"sourcesContent":["(function(f, define) {\n    define('kendo.slider',[ \"kendo.draganddrop\" ], f);\n})(function() {\n\nvar __meta__ = {\n    id: \"slider\",\n    name: \"Slider\",\n    category: \"web\",\n    description: \"The Slider widget provides a rich input for selecting values or ranges of values.\",\n    depends: [ \"draganddrop\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        Widget = kendo.ui.Widget,\n        Draggable = kendo.ui.Draggable,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        extend = $.extend,\n        format = kendo.format,\n        parse = kendo.parseFloat,\n        isArray = Array.isArray,\n        math = Math,\n        support = kendo.support,\n        pointers = support.pointers,\n        msPointers = support.msPointers,\n        CHANGE = \"change\",\n        SLIDE = \"slide\",\n        NS = \".slider\",\n        MOUSE_DOWN = \"touchstart\" + NS + \" mousedown\" + NS,\n        TRACK_MOUSE_DOWN = pointers ? \"pointerdown\" + NS : (msPointers ? \"MSPointerDown\" + NS : MOUSE_DOWN),\n        MOUSE_UP = \"touchend\" + NS + \" mouseup\" + NS,\n        TRACK_MOUSE_UP = pointers ? \"pointerup\" : (msPointers ? \"MSPointerUp\" + NS : MOUSE_UP),\n        MOVE_SELECTION = \"moveSelection\",\n        KEY_DOWN = \"keydown\" + NS,\n        CLICK = \"click\" + NS,\n        MOUSE_OVER = \"mouseover\" + NS,\n        FOCUS = \"focus\" + NS,\n        BLUR = \"blur\" + NS,\n        DRAG_HANDLE = \".k-draghandle\",\n        TRACK_SELECTOR = \".k-slider-track\",\n        TICK_SELECTOR = \".k-tick\",\n        STATE_SELECTED = \"k-selected\",\n        STATE_FOCUSED = \"k-focus\",\n        STATE_DISABLED = \"k-disabled\",\n        DISABLED = \"disabled\",\n        UNDEFINED = \"undefined\",\n        TABINDEX = \"tabindex\",\n        getTouches = kendo.getTouches,\n\n        ARIA_VALUETEXT = \"aria-valuetext\",\n        ARIA_VALUENOW = \"aria-valuenow\";\n\n    var SliderBase = Widget.extend({\n        init: function(element, options) {\n            var that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            options = that.options;\n            that._isHorizontal = options.orientation == \"horizontal\";\n            that._isRtl = that._isHorizontal && kendo.support.isRtl(element);\n            that._position = that._isHorizontal ? \"left\" : \"bottom\";\n            that._sizeFn = that._isHorizontal ? \"width\" : \"height\";\n            that._outerSize = that._isHorizontal ? outerWidth : outerHeight;\n\n            options.tooltip.format = options.tooltip.enabled ? options.tooltip.format || \"{0}\" : \"{0}\";\n\n            if (options.smallStep <= 0) {\n                throw new Error('Kendo UI Slider smallStep must be a positive number.');\n            }\n\n            that._createHtml();\n            that._trackDiv = that.wrapper.find(TRACK_SELECTOR);\n\n            that._maxSelection = that._trackDiv[that._sizeFn]();\n\n            that._sliderItemsInit();\n\n            that._reset();\n\n            that._tabindex(that.wrapper.find(DRAG_HANDLE));\n            that[options.enabled ? \"enable\" : \"disable\"]();\n\n            var rtlDirectionSign = kendo.support.isRtl(that.wrapper) ? -1 : 1;\n\n            that._keyMap = {\n                37: step(-1 * rtlDirectionSign * options.smallStep), // left arrow\n                40: step(-options.smallStep), // down arrow\n                39: step(+1 * rtlDirectionSign * options.smallStep), // right arrow\n                38: step(+options.smallStep), // up arrow\n                35: setValue(options.max), // end\n                36: setValue(options.min), // home\n                33: step(+options.largeStep), // page up\n                34: step(-options.largeStep) // page down\n            };\n\n            that._ariaLabel(that.wrapper.find(DRAG_HANDLE));\n\n            kendo.notify(that);\n        },\n\n        events: [\n            CHANGE,\n            SLIDE\n        ],\n\n        options: {\n            enabled: true,\n            min: 0,\n            max: 10,\n            smallStep: 1,\n            largeStep: 5,\n            orientation: \"horizontal\",\n            tickPlacement: \"both\",\n            tooltip: { enabled: true, format: \"{0}\" }\n        },\n\n        _distance: function() {\n            return round(this.options.max - this.options.min);\n        },\n\n        _resize: function() {\n            this.wrapper.find(\".k-slider-items\").remove();\n\n            this._maxSelection = this._trackDiv[this._sizeFn]();\n            this._sliderItemsInit();\n            this._refresh();\n\n            if (this.options.enabled) {\n                this.enable(true);\n            }\n        },\n\n        _sliderItemsInit: function() {\n            var that = this,\n                options = that.options;\n\n            // [Backwards compatibilty]: maxSelection is reduced with 2 to compensate new styling and preserve automatic calculation to not show ticks.\n            var sizeBetweenTicks = (that._maxSelection - 2) / ((options.max - options.min) / options.smallStep);\n\n            var pixelWidths = that._calculateItemsWidth(math.floor(removeFraction(that._distance()) / removeFraction(options.smallStep)));\n\n            if (options.tickPlacement != \"none\" && sizeBetweenTicks >= 2) {\n                $(this.element).parent().find(\".k-slider-items\").remove();\n                that._trackDiv.before(createSliderItems(options, that._distance()));\n                that._setItemsTitle();\n            }\n\n            that._calculateSteps(pixelWidths);\n\n            if (options.tickPlacement != \"none\" && sizeBetweenTicks >= 2 &&\n                options.largeStep >= options.smallStep) {\n                that._setItemsLargeTick();\n                that.wrapper.find(TICK_SELECTOR).first().addClass(\"k-first\");\n                that.wrapper.find(TICK_SELECTOR).last().addClass(\"k-last\");\n            }\n        },\n\n        getSize: function() {\n            return kendo.dimensions(this.wrapper);\n        },\n\n        _setItemsTitle: function() {\n            var that = this,\n                options = that.options,\n                items = that.wrapper.find(TICK_SELECTOR),\n                titleNumber = options.min,\n                count = items.length;\n\n            for (var i = 0; i <= count; i += 1) {\n                $(items[i]).attr(\"title\", format(options.tooltip.format, round(titleNumber)));\n                titleNumber += options.smallStep;\n            }\n        },\n\n        _setItemsLargeTick: function() {\n            var that = this,\n                options = that.options,\n                items = that.wrapper.find(TICK_SELECTOR),\n                i = 0, item, value;\n\n            if (removeFraction(options.largeStep) % removeFraction(options.smallStep) === 0 || that._distance() / options.largeStep >= 3) {\n                if (!that._isHorizontal && !that._isRtl) {\n                    items = $.makeArray(items).reverse();\n                }\n\n                for (i = 0; i < items.length; i++) {\n                    item = $(items[i]);\n                    value = that._values[i];\n                    var valueWithoutFraction = round(removeFraction(value - this.options.min));\n                    if (valueWithoutFraction % removeFraction(options.smallStep) === 0 && valueWithoutFraction % removeFraction(options.largeStep) === 0) {\n                        item.addClass(\"k-tick-large\")\n                            .html(\"<span class='k-label'>\" + item.attr(\"title\") + \"</span>\");\n\n                        if (i !== 0 && i !== items.length - 1) {\n                            item.css(\"line-height\", item[that._sizeFn]() + \"px\");\n                        }\n                    }\n                }\n            }\n        },\n\n        _calculateItemsWidth: function(itemsCount) {\n            var that = this,\n                options = that.options,\n                trackDivSize = parseFloat(that._trackDiv.css(that._sizeFn)) + 1,\n                distance = that._distance(),\n                preciseItemsCount = removeFraction(distance) / removeFraction(options.smallStep),\n                pixelStep = trackDivSize / removeFraction(distance),\n                itemWidth,\n                pixelWidths,\n                i;\n\n            if (preciseItemsCount - itemsCount > 0) {\n                trackDivSize -= ((removeFraction(distance) % removeFraction(options.smallStep)) * pixelStep);\n            }\n\n            itemWidth = trackDivSize / itemsCount;\n            pixelWidths = [];\n\n            for (i = 0; i < itemsCount - 1; i++) {\n                pixelWidths[i] = itemWidth;\n            }\n\n            pixelWidths[itemsCount - 1] = pixelWidths[itemsCount] = itemWidth / 2;\n            return that._roundWidths(pixelWidths);\n        },\n\n        _roundWidths: function(pixelWidthsArray) {\n            var balance = 0,\n                count = pixelWidthsArray.length,\n                i;\n\n            for (i = 0; i < count; i++) {\n                balance += (pixelWidthsArray[i] - math.floor(pixelWidthsArray[i]));\n                pixelWidthsArray[i] = math.floor(pixelWidthsArray[i]);\n            }\n\n            balance = math.round(balance);\n\n            return this._addAdditionalSize(balance, pixelWidthsArray);\n        },\n\n        _addAdditionalSize: function(additionalSize, pixelWidthsArray) {\n            if (additionalSize === 0) {\n                return pixelWidthsArray;\n            }\n\n            //set step size\n            var step = parseFloat(pixelWidthsArray.length - 1) / parseFloat(additionalSize == 1 ? additionalSize : additionalSize - 1),\n                i;\n\n            for (i = 0; i < additionalSize; i++) {\n                pixelWidthsArray[parseInt(math.round(step * i), 10)] += 1;\n            }\n\n            return pixelWidthsArray;\n        },\n\n        _calculateSteps: function(pixelWidths) {\n            var that = this,\n                options = that.options,\n                val = options.min,\n                selection = 0,\n                distance = that._distance(),\n                itemsCount = math.ceil(removeFraction(distance) / removeFraction(options.smallStep)),\n                i = 1,\n                lastItem;\n\n            itemsCount += (removeFraction(distance) / removeFraction(options.smallStep)) % 1 === 0 ? 1 : 0;\n            pixelWidths.splice(0, 0, pixelWidths[itemsCount - 2] * 2);\n            pixelWidths.splice(itemsCount - 1, 1, pixelWidths.pop() * 2);\n\n            that._pixelSteps = [selection];\n            that._values = [val];\n\n            if (itemsCount === 0) {\n                return;\n            }\n\n            while (i < itemsCount) {\n                selection += (pixelWidths[i - 1] + pixelWidths[i]) / 2;\n                that._pixelSteps[i] = selection;\n                val += options.smallStep;\n                that._values[i] = round(val);\n\n                i++;\n            }\n\n            lastItem = (removeFraction(distance) % removeFraction(options.smallStep)) === 0 ? itemsCount - 1 : itemsCount;\n\n            that._pixelSteps[lastItem] = that._maxSelection;\n            that._values[lastItem] = options.max;\n\n            if (that._isRtl) {\n                that._pixelSteps.reverse();\n                that._values.reverse();\n            }\n        },\n\n        _getValueFromPosition: function(mousePosition, draggableArea) {\n            var that = this,\n                options = that.options,\n                step = math.max(options.smallStep * (that._maxSelection / that._distance()), 0),\n                position = 0,\n                halfStep = (step / 2),\n                i;\n\n            if (that._isHorizontal) {\n                position = mousePosition - draggableArea.startPoint;\n                if (that._isRtl) {\n                    position = that._maxSelection - position;\n                }\n            } else {\n                position = draggableArea.startPoint - mousePosition;\n            }\n\n            if (that._maxSelection - ((parseInt(that._maxSelection % step, 10) - 3) / 2) < position) {\n                return options.max;\n            }\n\n            for (i = 0; i < that._pixelSteps.length; i++) {\n                if (math.abs(that._pixelSteps[i] - position) - 1 <= halfStep) {\n                    return round(that._values[i]);\n                }\n            }\n        },\n\n        _getFormattedValue: function(val, drag) {\n            var that = this,\n                html = \"\",\n                tooltip = that.options.tooltip,\n                tooltipTemplate,\n                selectionStart,\n                selectionEnd;\n\n            if (isArray(val)) {\n                selectionStart = val[0];\n                selectionEnd = val[1];\n            } else if (drag && drag.type) {\n                selectionStart = drag.selectionStart;\n                selectionEnd = drag.selectionEnd;\n            }\n\n            if (drag) {\n                tooltipTemplate = drag.tooltipTemplate;\n            }\n\n            if (!tooltipTemplate && tooltip.template) {\n                tooltipTemplate = kendo.template(tooltip.template);\n            }\n\n            if (isArray(val) || (drag && drag.type)) {\n\n                if (tooltipTemplate) {\n                    html = tooltipTemplate({\n                        selectionStart: selectionStart,\n                        selectionEnd: selectionEnd\n                    });\n                } else {\n                    selectionStart = format(tooltip.format, selectionStart);\n                    selectionEnd = format(tooltip.format, selectionEnd);\n                    html = selectionStart + \" - \" + selectionEnd;\n                }\n            } else {\n                if (drag) {\n                    drag.val = val;\n                }\n\n                if (tooltipTemplate) {\n                    html = tooltipTemplate({\n                        value: val\n                    });\n                } else {\n                    html = format(tooltip.format, val);\n                }\n            }\n            return html;\n        },\n\n        _getDraggableArea: function() {\n            var that = this,\n                offset = kendo.getOffset(that._trackDiv);\n\n            return {\n                startPoint: that._isHorizontal ? offset.left : offset.top + that._maxSelection,\n                endPoint: that._isHorizontal ? offset.left + that._maxSelection : offset.top\n            };\n        },\n\n        _createHtml: function() {\n            var that = this,\n                element = that.element,\n                options = that.options,\n                inputs = element.find(\"input\");\n\n            if (inputs.length == 2) {\n                inputs.eq(0).prop(\"value\", formatValue(options.selectionStart));\n                inputs.eq(1).prop(\"value\", formatValue(options.selectionEnd));\n            } else {\n                element.prop(\"value\", formatValue(options.value));\n            }\n\n            that.wrapper = element.wrap(createWrapper(options, element, that._isHorizontal)).hide().parents(\".k-slider\");\n\n            if (options.showButtons) {\n                that.wrapper.find(\".k-slider-track-wrap\")\n                       .after(createButton(options, \"increase\", that._isHorizontal, that._isRtl))\n                       .before(createButton(options, \"decrease\", that._isHorizontal, that._isRtl));\n            }\n\n            element.before(createTrack(options, element, that._isHorizontal));\n        },\n\n        _focus: function(e) {\n            var that = this,\n                target = e.target,\n                val = that.value(),\n                drag = that._drag;\n\n            if (!drag) {\n                if (target == that.wrapper.find(DRAG_HANDLE).eq(0)[0]) {\n                    drag = that._firstHandleDrag;\n                    that._activeHandle = 0;\n                } else {\n                    drag = that._lastHandleDrag;\n                    that._activeHandle = 1;\n                }\n                val = val[that._activeHandle];\n            }\n\n            $(target).addClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n\n            if (drag) {\n                that._activeHandleDrag = drag;\n\n                drag.selectionStart = that.options.selectionStart;\n                drag.selectionEnd = that.options.selectionEnd;\n\n                drag._updateTooltip(val);\n            }\n        },\n\n        _focusWithMouse: function(target) {\n            target = $(target);\n\n            var that = this,\n                idx = target.is(DRAG_HANDLE) ? target.index() : 0;\n\n            window.setTimeout(function() {\n                that.wrapper.find(DRAG_HANDLE)[idx == 2 ? 1 : 0].focus();\n            }, 1);\n\n            that._setTooltipTimeout();\n        },\n\n        _blur: function(e) {\n            var that = this,\n                drag = that._activeHandleDrag;\n\n            $(e.target).removeClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n\n            if (drag) {\n                drag._removeTooltip();\n                delete that._activeHandleDrag;\n                delete that._activeHandle;\n            }\n        },\n\n        _setTooltipTimeout: function() {\n            var that = this;\n            that._tooltipTimeout = window.setTimeout(function() {\n                var drag = that._drag || that._activeHandleDrag;\n                if (drag) {\n                    drag._removeTooltip();\n                }\n            }, 300);\n        },\n\n        _clearTooltipTimeout: function() {\n            var that = this;\n            window.clearTimeout(this._tooltipTimeout);\n            var drag = that._drag || that._activeHandleDrag;\n            if (drag && drag.tooltipDiv) {\n                drag.tooltipDiv.stop(true, false).css(\"opacity\", 1);\n            }\n        },\n\n        _reset: function() {\n            var that = this,\n                element = that.element,\n                formId = element.attr(\"form\"),\n                form = formId ? $(\"#\" + formId) : element.closest(\"form\");\n\n            if (form[0]) {\n                that._form = form.on(\"reset\", that._formResetHandler.bind(that));\n            }\n        },\n\n        min: function(value) {\n            if (!value) {\n                return this.options.min;\n            }\n            this.setOptions({ \"min\": value });\n        },\n\n        max: function(value) {\n            if (!value) {\n                return this.options.max;\n            }\n            this.setOptions({ \"max\": value });\n        },\n\n        setOptions: function(options) {\n            Widget.fn.setOptions.call(this, options);\n            this._sliderItemsInit();\n            this._refresh();\n        },\n\n        destroy: function() {\n            if (this._form) {\n                this._form.off(\"reset\", this._formResetHandler);\n            }\n            Widget.fn.destroy.call(this);\n        }\n    });\n\n    function createWrapper(options, element, isHorizontal) {\n        var orientationCssClass = isHorizontal ? \" k-slider-horizontal\" : \" k-slider-vertical\",\n            style = options.style ? options.style : element.attr(\"style\"),\n            cssClasses = element.attr(\"class\") ? (\" \" + element.attr(\"class\")) : \"\",\n            tickPlacementCssClass = \"\";\n\n        if (options.tickPlacement == \"bottomRight\") {\n            tickPlacementCssClass = \" k-slider-bottomright\";\n        } else if (options.tickPlacement == \"topLeft\") {\n            tickPlacementCssClass = \" k-slider-topleft\";\n        }\n\n        style = style ? \" style='\" + style + \"'\" : \"\";\n\n        return \"<div class='k-widget k-slider\" + orientationCssClass + cssClasses + \"'\" + style + \">\" +\n               \"<div class='k-slider-track-wrap\" + tickPlacementCssClass +\n               \"'></div></div>\";\n    }\n\n    function createButton(options, type, isHorizontal) {\n        var buttonCssClass = \"\";\n\n        if (isHorizontal) {\n            if (type === \"increase\") {\n                buttonCssClass = \"k-i-arrow-e\";\n            } else {\n                buttonCssClass = \"k-i-arrow-w\";\n            }\n        } else {\n            if (type == \"increase\") {\n                buttonCssClass = \"k-i-arrow-n\";\n            } else {\n                buttonCssClass = \"k-i-arrow-s\";\n            }\n        }\n\n        return \"<a role='button' class='k-button k-button-md k-rounded-full k-button-solid k-button-solid-base k-icon-button k-button-\" + type + \"' \" +\n                \"title='\" + options[type + \"ButtonTitle\"] + \"' \" +\n                \"aria-label='\" + options[type + \"ButtonTitle\"] + \"'>\" +\n                \"<span class='k-button-icon k-icon \" + buttonCssClass + \"'></span></a>\";\n    }\n\n    function createSliderItems(options, distance) {\n        var result = \"<ul class='k-reset k-slider-items' role='presentation'>\",\n            count = math.floor(round(distance / options.smallStep)) + 1,\n            i;\n\n        for (i = 0; i < count; i++) {\n            result += \"<li class='k-tick'></li>\";\n        }\n\n        result += \"</ul>\";\n\n        return result;\n    }\n\n    function createTrack(options, element, isHorizontal) {\n        var dragHandleCount = element.is(\"input\") ? 1 : 2,\n            firstDragHandleTitle = dragHandleCount == 2 ? options.leftDragHandleTitle : options.dragHandleTitle,\n            value = options.value,\n            min = options.selectionStart,\n            max = options.selectionEnd,\n            elementValue, minElementValue, maxElementValue;\n\n        if (dragHandleCount === 1) {\n            elementValue = element.val();\n\n            if (elementValue !== null && elementValue !== undefined && elementValue !== 'null') {\n                if (value === null || value === undefined) {\n                    value = elementValue;\n                }\n            }\n        } else {\n            minElementValue = element.find(\"input\").eq(0).val();\n            maxElementValue = element.find(\"input\").eq(1).val();\n\n            if (minElementValue !== null && minElementValue !== undefined && minElementValue !== 'null') {\n                if (min === null || min === undefined) {\n                    min = minElementValue;\n                }\n            }\n\n            if (maxElementValue !== null && maxElementValue !== undefined && maxElementValue !== 'null') {\n                if (max === null || max === undefined) {\n                    max = maxElementValue;\n                }\n            }\n        }\n\n        var result = \"<div class='k-slider-track'><div class='k-slider-selection'><!-- --></div>\" +\n               \"<span tabindex='0' class='k-draghandle' title='\" + firstDragHandleTitle + \"' role='slider' \" +\n               (isHorizontal === false ? \"aria-orientation='vertical' \" : \"\") +\n               \"aria-valuemin='\" + options.min + \"' aria-valuemax='\" + options.max + \"' aria-valuenow='\" + (dragHandleCount > 1 ? (min || options.min) : value || options.min) + \"'></span>\" +\n               (dragHandleCount > 1 ? \"<span tabindex='0' class='k-draghandle' title='\" + options.rightDragHandleTitle + \"'role='slider' \" +\n               (isHorizontal === false ? \"aria-orientation='vertical' \" : \"\") +\n               \"aria-valuemin='\" + options.min + \"' aria-valuemax='\" + options.max + \"' aria-valuenow='\" + (max || options.max) + \"'></span>\" : \"\") +\n               \"</div>\";\n\n        return result;\n    }\n\n    function step(stepValue) {\n        return function(value) {\n            return value + stepValue;\n        };\n    }\n\n    function setValue(value) {\n        return function() {\n            return value;\n        };\n    }\n\n    function formatValue(value) {\n        return (value + \"\").replace(\".\", kendo.cultures.current.numberFormat[\".\"]);\n    }\n\n    function calculatePrecision(value) {\n        var number = value.toString();\n        var precision = 0;\n\n        number = number.split(\".\");\n\n        if (number[1]) {\n            precision = number[1].length;\n        }\n\n        precision = precision > 10 ? 10 : precision;\n        return precision;\n    }\n\n    function round(value) {\n        var precision, power;\n\n        value = parseFloat(value, 10);\n        precision = calculatePrecision(value);\n        power = math.pow(10, precision || 0);\n\n        return math.round(value * power) / power;\n    }\n\n    function parseAttr(element, name) {\n        var value = parse(element.getAttribute(name));\n        if (value === null) {\n            value = undefined;\n        }\n        return value;\n    }\n\n    function defined(value) {\n        return typeof value !== UNDEFINED;\n    }\n\n    function removeFraction(value) {\n        return value * 10000;\n    }\n\n    var Slider = SliderBase.extend({\n        init: function(element, options) {\n            var that = this,\n                dragHandle;\n\n            element.type = \"text\";\n            options = extend({}, {\n                value: parseAttr(element, \"value\"),\n                min: parseAttr(element, \"min\"),\n                max: parseAttr(element, \"max\"),\n                smallStep: parseAttr(element, \"step\")\n            }, options);\n\n            element = $(element);\n\n            if (options && options.enabled === undefined) {\n                options.enabled = !element.is(\"[disabled]\");\n            }\n\n            SliderBase.fn.init.call(that, element, options);\n            options = that.options;\n            if (!defined(options.value) || options.value === null) {\n                options.value = options.min;\n                element.prop(\"value\", formatValue(options.min));\n            }\n            options.value = math.max(math.min(options.value, options.max), options.min);\n\n            dragHandle = that.wrapper.find(DRAG_HANDLE);\n\n            that._selection = new Slider.Selection(dragHandle, that, options);\n            that._drag = new Slider.Drag(dragHandle, \"\", that, options);\n\n            that._refreshAriaAttr(options.value);\n        },\n\n        options: {\n            name: \"Slider\",\n            showButtons: true,\n            increaseButtonTitle: \"Increase\",\n            decreaseButtonTitle: \"Decrease\",\n            dragHandleTitle: \"drag\",\n            tooltip: { format: \"{0:#,#.##}\" },\n            value: null\n        },\n\n        enable: function(enable) {\n            var that = this,\n                options = that.options,\n                clickHandler,\n                move;\n\n            that.disable();\n            if (enable === false) {\n                return;\n            }\n\n            that.wrapper\n                .removeClass(STATE_DISABLED);\n\n            that.wrapper.find(\"input\").prop(DISABLED, false);\n\n            clickHandler = function(e) {\n                var touch = getTouches(e)[0];\n\n                if (!touch) {\n                    return;\n                }\n\n                var mousePosition = that._isHorizontal ? touch.location.pageX : touch.location.pageY,\n                    draggableArea = that._getDraggableArea(),\n                    target = $(e.target);\n\n                if (target.hasClass(\"k-draghandle\")) {\n                    target.addClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n                    return;\n                }\n\n                that._update(that._getValueFromPosition(mousePosition, draggableArea));\n\n                that._focusWithMouse(e.target);\n\n                that._drag.dragstart(e);\n                e.preventDefault();\n            };\n\n            that.wrapper\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR)\n                    .on(TRACK_MOUSE_DOWN, clickHandler)\n                    .end()\n                    .on(TRACK_MOUSE_DOWN, function() {\n                        $(document.documentElement).one(\"selectstart\", kendo.preventDefault);\n                    })\n                    .on(TRACK_MOUSE_UP, function() {\n                        that._drag._end();\n                    });\n\n            that.wrapper\n                .find(DRAG_HANDLE)\n                .attr(TABINDEX, 0)\n                .on(MOUSE_UP, function() {\n                    that._setTooltipTimeout();\n                })\n                .on(CLICK, function(e) {\n                    that._focusWithMouse(e.target);\n                    e.preventDefault();\n                })\n                .on(FOCUS, that._focus.bind(that))\n                .on(BLUR, that._blur.bind(that));\n\n            move = (function(sign) {\n                var newVal = that._nextValueByIndex(that._valueIndex + (sign * 1));\n                that._setValueInRange(newVal);\n                that._drag._updateTooltip(newVal);\n            });\n\n            if (options.showButtons) {\n                var mouseDownHandler = (function(e, sign) {\n                    this._clearTooltipTimeout();\n                    if (e.which === 1 || (support.touch && e.which === 0)) {\n                        move(sign);\n\n                        this.timeout = setTimeout((function() {\n                            this.timer = setInterval(function() {\n                                move(sign);\n                            }, 60);\n                        }).bind(this), 200);\n                    }\n                }).bind(that);\n\n                that.wrapper.find(\".k-button\")\n                    .on(MOUSE_UP, (function(e) {\n                        this._clearTimer();\n                        that._focusWithMouse(e.target);\n                    }).bind(that))\n                    .on(MOUSE_OVER, function(e) {\n                        $(e.currentTarget).addClass(\"k-hover\");\n                    })\n                    .on(\"mouseout\" + NS, (function(e) {\n                        $(e.currentTarget).removeClass(\"k-hover\");\n                        this._clearTimer();\n                    }).bind(that))\n                    .on(MOUSE_DOWN, (function(e) {\n                        var sign = $(e.target).closest(\".k-button\").is(\".k-button-increase\") ? 1 : -1;\n                        mouseDownHandler(e, sign);\n                    }))\n                    .on(\"click\", kendo.preventDefault);\n            }\n\n            that.wrapper\n                .find(DRAG_HANDLE)\n                .off(KEY_DOWN, false)\n                .on(KEY_DOWN, this._keydown.bind(that));\n\n            options.enabled = true;\n        },\n\n        disable: function() {\n            var that = this;\n\n            that.wrapper\n                .addClass(STATE_DISABLED);\n\n            $(that.element).prop(DISABLED, DISABLED);\n\n            that.wrapper\n                .find(\".k-button\")\n                .off(MOUSE_DOWN)\n                .on(MOUSE_DOWN, function(e) {\n                    e.preventDefault();\n                    $(this).addClass(\"k-active\");\n                })\n                .off(MOUSE_UP)\n                .on(MOUSE_UP, function(e) {\n                    e.preventDefault();\n                    $(this).removeClass(\"k-active\");\n                })\n                .off(\"mouseleave\" + NS)\n                .on(\"mouseleave\" + NS, kendo.preventDefault)\n                .off(MOUSE_OVER)\n                .on(MOUSE_OVER, kendo.preventDefault);\n\n            that.wrapper\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR).off(TRACK_MOUSE_DOWN).off(TRACK_MOUSE_UP);\n\n            that.wrapper\n                .find(DRAG_HANDLE)\n                .attr(TABINDEX, -1)\n                .off(MOUSE_UP)\n                .off(KEY_DOWN)\n                .off(CLICK)\n                .off(FOCUS)\n                .off(BLUR);\n\n            that.options.enabled = false;\n        },\n\n        _update: function(val) {\n            var that = this,\n                change = that.value() != val;\n\n            that.value(val);\n\n            if (change) {\n                that.trigger(CHANGE, { value: that.options.value });\n            }\n        },\n\n        value: function(value) {\n            var that = this,\n                options = that.options;\n\n            value = round(value);\n            if (isNaN(value)) {\n                return options.value;\n            }\n\n            if (value >= options.min && value <= options.max) {\n                if (options.value != value) {\n                    that.element.prop(\"value\", formatValue(value));\n                    options.value = value;\n                    that._refreshAriaAttr(value);\n                    that._refresh();\n                }\n            }\n        },\n\n        _refresh: function() {\n            this.trigger(MOVE_SELECTION, { value: this.options.value });\n        },\n\n        _refreshAriaAttr: function(value) {\n            var that = this,\n                drag = that._drag,\n                formattedValue;\n\n            if (drag && drag._tooltipDiv) {\n                formattedValue = drag._tooltipDiv.text();\n            } else {\n                formattedValue = that._getFormattedValue(value, null);\n            }\n            this.wrapper.find(DRAG_HANDLE).attr(ARIA_VALUENOW, value).attr(ARIA_VALUETEXT, formattedValue);\n        },\n\n        _clearTimer: function() {\n            clearTimeout(this.timeout);\n            clearInterval(this.timer);\n        },\n\n        _keydown: function(e) {\n            var that = this;\n\n            if (e.keyCode in that._keyMap) {\n                that._clearTooltipTimeout();\n                that._setValueInRange(that._keyMap[e.keyCode](that.options.value));\n                that._drag._updateTooltip(that.value());\n                e.preventDefault();\n            }\n        },\n\n        _setValueInRange: function(val) {\n            var that = this,\n                options = that.options;\n\n            val = round(val);\n            if (isNaN(val)) {\n                that._update(options.min);\n                return;\n            }\n\n            val = math.max(math.min(val, options.max), options.min);\n            that._update(val);\n        },\n\n        _nextValueByIndex: function(index) {\n            var count = this._values.length;\n            if (this._isRtl) {\n                index = count - 1 - index;\n            }\n            return this._values[math.max(0, math.min(index, count - 1))];\n        },\n\n        _formResetHandler: function() {\n            var that = this,\n                min = that.options.min;\n\n            setTimeout(function() {\n                var value = that.element[0].value;\n                that.value(value === \"\" || isNaN(value) ? min : value);\n            });\n        },\n\n        destroy: function() {\n            var that = this;\n\n            SliderBase.fn.destroy.call(that);\n\n            that.wrapper.off(NS)\n                .find(\".k-button\").off(NS)\n                .end()\n                .find(DRAG_HANDLE).off(NS)\n                .end()\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR).off(NS)\n                .end();\n\n            that._drag.draggable.destroy();\n            that._drag._removeTooltip(true);\n        }\n    });\n\n    Slider.Selection = function(dragHandle, that, options) {\n        function moveSelection(val) {\n            var selectionValue = val - options.min,\n                index = that._valueIndex = math.ceil(round(selectionValue / options.smallStep)),\n                selection = parseInt(that._pixelSteps[index], 10),\n                selectionDiv = that._trackDiv.find(\".k-slider-selection\"),\n                rtlCorrection = that._isRtl ? 2 : 0;\n\n            selectionDiv[that._sizeFn](that._isRtl ? that._maxSelection - selection : selection);\n            dragHandle.css(that._position, selection - rtlCorrection);\n        }\n\n        moveSelection(options.value);\n\n        that.bind([SLIDE, MOVE_SELECTION], function(e) {\n            moveSelection(parseFloat(e.value, 10));\n        });\n\n        that.bind(CHANGE, function(e) {\n            moveSelection(parseFloat(e.sender.value(), 10));\n        });\n    };\n\n    Slider.Drag = function(element, type, owner, options) {\n        var that = this;\n        that.owner = owner;\n        that.options = options;\n        that.element = element;\n        that.type = type;\n\n        that.draggable = new Draggable(element, {\n            distance: 0,\n            dragstart: that._dragstart.bind(that),\n            drag: that.drag.bind(that),\n            dragend: that.dragend.bind(that),\n            dragcancel: that.dragcancel.bind(that)\n        });\n\n        element.click(false);\n\n        // Disable link dragging\n        element.on(\"dragstart\", function(e) {\n            e.preventDefault();\n        });\n    };\n\n    Slider.Drag.prototype = {\n        dragstart: function(e) {\n            // add reference to the last active drag handle.\n            this.owner._activeDragHandle = this;\n            // HACK to initiate click on the line\n            this.draggable.userEvents.cancel();\n            this._dragstart(e);\n            this.dragend();\n        },\n\n        _dragstart: function(e) {\n            var that = this,\n                owner = that.owner,\n                options = that.options;\n\n            if (!options.enabled) {\n                e.preventDefault();\n                return;\n            }\n\n            // add reference to the last active drag handle.\n            this.owner._activeDragHandle = this;\n\n            owner.element.off(MOUSE_OVER);\n            owner.wrapper.find(\".\" + STATE_FOCUSED).removeClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n            that.element.addClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n            $(document.documentElement).css(\"cursor\", \"pointer\");\n\n            that.draggableArea = owner._getDraggableArea();\n            that.step = math.max(options.smallStep * (owner._maxSelection / owner._distance()), 0);\n\n            if (that.type) {\n                that.selectionStart = options.selectionStart;\n                that.selectionEnd = options.selectionEnd;\n                owner._setZIndex(that.type);\n            } else {\n                that.oldVal = that.val = options.value;\n            }\n\n            that._removeTooltip(true);\n            that._createTooltip();\n        },\n\n        _createTooltip: function() {\n            var that = this,\n                owner = that.owner,\n                tooltip = that.options.tooltip,\n                html = '',\n                wnd = $(window),\n                tooltipTemplate, calloutCssClass;\n\n            if (!tooltip.enabled) {\n                return;\n            }\n\n            if (tooltip.template) {\n                tooltipTemplate = that.tooltipTemplate = kendo.template(tooltip.template);\n            }\n\n            $(\".k-slider-tooltip\").remove(); // if user changes window while tooltip is visible, a second one will be created\n            that.tooltipDiv = $(\"<div class='k-tooltip k-slider-tooltip'><!-- --></div>\").appendTo(document.body);\n\n            html = owner._getFormattedValue(that.val || owner.value(), that);\n\n            if (!that.type) {\n                calloutCssClass = \"k-callout-\" + (owner._isHorizontal ? 's' : 'e');\n                that.tooltipInnerDiv = \"<div class='k-callout \" + calloutCssClass + \"'><!-- --></div>\";\n                html += that.tooltipInnerDiv;\n            }\n\n            that.tooltipDiv.html(html);\n\n            that._scrollOffset = {\n                top: wnd.scrollTop(),\n                left: kendo.scrollLeft(wnd)\n            };\n\n            that.moveTooltip();\n        },\n\n        drag: function(e) {\n            var that = this,\n                owner = that.owner,\n                x = e.x.location,\n                y = e.y.location,\n                startPoint = that.draggableArea.startPoint,\n                endPoint = that.draggableArea.endPoint,\n                slideParams;\n\n            e.preventDefault();\n\n            if (owner._isHorizontal) {\n                if (owner._isRtl) {\n                    that.val = that.constrainValue(x, startPoint, endPoint, x < endPoint);\n                } else {\n                    that.val = that.constrainValue(x, startPoint, endPoint, x >= endPoint);\n                }\n            } else {\n                that.val = that.constrainValue(y, endPoint, startPoint, y <= endPoint);\n            }\n\n            if (that.oldVal != that.val) {\n                that.oldVal = that.val;\n\n                if (that.type) {\n                    if (that.type == \"firstHandle\") {\n                        if (that.val < that.selectionEnd) {\n                            that.selectionStart = that.val;\n                        } else {\n                            that.selectionStart = that.selectionEnd = that.val;\n                        }\n                    } else {\n                        if (that.val > that.selectionStart) {\n                            that.selectionEnd = that.val;\n                        } else {\n                            that.selectionStart = that.selectionEnd = that.val;\n                        }\n                    }\n                    slideParams = {\n                        values: [that.selectionStart, that.selectionEnd],\n                        value: [that.selectionStart, that.selectionEnd]\n                    };\n                } else {\n                    slideParams = { value: that.val };\n                }\n\n                owner.trigger(SLIDE, slideParams);\n            }\n            that._updateTooltip(that.val);\n        },\n\n        _updateTooltip: function(val) {\n            var that = this,\n                options = that.options,\n                tooltip = options.tooltip,\n                html = \"\";\n\n            if (!tooltip.enabled) {\n                return;\n            }\n\n            if (!that.tooltipDiv) {\n                that._createTooltip();\n            }\n\n            html = that.owner._getFormattedValue(round(val), that);\n\n            if (!that.type) {\n                html += that.tooltipInnerDiv;\n            }\n\n            that.tooltipDiv.html(html);\n            that.moveTooltip();\n        },\n\n        dragcancel: function() {\n            this.owner._refresh();\n            $(document.documentElement).css(\"cursor\", \"\");\n            return this._end();\n        },\n\n        dragend: function() {\n            var that = this,\n                owner = that.owner;\n\n            $(document.documentElement).css(\"cursor\", \"\");\n\n            if (that.type) {\n                owner._update(that.selectionStart, that.selectionEnd);\n            } else {\n                owner._update(that.val);\n                that.draggable.userEvents._disposeAll();\n            }\n\n            that.draggable.userEvents.cancel();\n            return that._end();\n        },\n\n        _end: function() {\n            var that = this,\n                owner = that.owner;\n\n            owner._focusWithMouse(that.element);\n\n            owner.element.on(MOUSE_OVER);\n\n            return false;\n        },\n\n        _removeTooltip: function(noAnimation) {\n            var that = this,\n                owner = that.owner;\n\n            if (that.tooltipDiv && owner.options.tooltip.enabled && owner.options.enabled) {\n                if (noAnimation) {\n                    that.tooltipDiv.remove();\n                    that.tooltipDiv = null;\n                } else {\n                    that.tooltipDiv.fadeOut(\"slow\", function() {\n                        $(this).remove();\n                        that.tooltipDiv = null;\n                    });\n                }\n            }\n        },\n\n        moveTooltip: function() {\n            var that = this,\n                owner = that.owner,\n                top = 0,\n                left = 0,\n                element = that.element,\n                offset = kendo.getOffset(element),\n                margin = 8,\n                viewport = $(window),\n                callout = that.tooltipDiv.find(\".k-callout\"),\n                width = outerWidth(that.tooltipDiv),\n                height = outerHeight(that.tooltipDiv),\n                dragHandles, sdhOffset, diff, anchorSize;\n\n            if (that.type) {\n                dragHandles = owner.wrapper.find(DRAG_HANDLE);\n                offset = kendo.getOffset(dragHandles.eq(0));\n                sdhOffset = kendo.getOffset(dragHandles.eq(1));\n\n                if (owner._isHorizontal) {\n                    top = sdhOffset.top;\n                    left = offset.left + ((sdhOffset.left - offset.left) / 2);\n                } else {\n                    top = offset.top + ((sdhOffset.top - offset.top) / 2);\n                    left = sdhOffset.left;\n                }\n\n                anchorSize = outerWidth(dragHandles.eq(0)) + 2 * margin;\n            } else {\n                top = offset.top;\n                left = offset.left;\n                anchorSize = outerWidth(element) + 2 * margin;\n            }\n\n            if (owner._isHorizontal) {\n                left -= parseInt((width - owner._outerSize(element)) / 2, 10);\n                top -= height + margin + (callout.length ? callout.height() : 0);\n            } else {\n                top -= parseInt((height - owner._outerSize(element)) / 2, 10);\n                left -= width + margin + (callout.length ? callout.width() : 0);\n            }\n\n            if (owner._isHorizontal) {\n                diff = that._flip(top, height, anchorSize, outerHeight(viewport) + that._scrollOffset.top);\n                top += diff;\n                left += that._fit(left, width, outerWidth(viewport) + that._scrollOffset.left);\n            } else {\n                diff = that._flip(left, width, anchorSize, outerWidth(viewport) + that._scrollOffset.left);\n                top += that._fit(top, height, outerHeight(viewport) + that._scrollOffset.top);\n                left += diff;\n            }\n\n            if (diff > 0 && callout) {\n                callout.removeClass();\n                callout.addClass(\"k-callout k-callout-\" + (owner._isHorizontal ? \"n\" : \"w\"));\n            }\n\n            that.tooltipDiv.css({ top: top, left: left });\n        },\n\n        _fit: function(position, size, viewPortEnd) {\n            var output = 0;\n\n            if (position + size > viewPortEnd) {\n                output = viewPortEnd - (position + size);\n            }\n\n            if (position < 0) {\n                output = -position;\n            }\n\n            return output;\n        },\n\n        _flip: function(offset, size, anchorSize, viewPortEnd) {\n            var output = 0;\n\n            if (offset + size > viewPortEnd) {\n                output += -(anchorSize + size);\n            }\n\n            if (offset + output < 0) {\n                output += anchorSize + size;\n            }\n\n            return output;\n        },\n\n        constrainValue: function(position, min, max, maxOverflow) {\n            var that = this,\n                val = 0;\n\n            if (min < position && position < max) {\n                val = that.owner._getValueFromPosition(position, that.draggableArea);\n            } else {\n                if (maxOverflow ) {\n                    val = that.options.max;\n                } else {\n                    val = that.options.min;\n                }\n            }\n\n            return val;\n        }\n\n    };\n\n    kendo.ui.plugin(Slider);\n\n    var RangeSlider = SliderBase.extend({\n        init: function(element, options) {\n            var that = this,\n                inputs = $(element).find(\"input\"),\n                firstInput = inputs.eq(0)[0],\n                secondInput = inputs.eq(1)[0];\n\n            firstInput.type = \"text\";\n            secondInput.type = \"text\";\n\n            if (options && options.showButtons) {\n                if (window.console) {\n                    window.console.warn(\"showbuttons option is not supported for the range slider, ignoring\");\n                }\n\n                options.showButtons = false;\n            }\n\n            options = extend({}, {\n                selectionStart: parseAttr(firstInput, \"value\"),\n                min: parseAttr(firstInput, \"min\"),\n                max: parseAttr(firstInput, \"max\"),\n                smallStep: parseAttr(firstInput, \"step\")\n            }, {\n                selectionEnd: parseAttr(secondInput, \"value\"),\n                min: parseAttr(secondInput, \"min\"),\n                max: parseAttr(secondInput, \"max\"),\n                smallStep: parseAttr(secondInput, \"step\")\n            }, options);\n\n            if (options && options.enabled === undefined) {\n                options.enabled = !inputs.is(\"[disabled]\");\n            }\n\n            SliderBase.fn.init.call(that, element, options);\n            options = that.options;\n            if (!defined(options.selectionStart) || options.selectionStart === null) {\n                options.selectionStart = options.min;\n                inputs.eq(0).prop(\"value\", formatValue(options.min));\n            }\n\n            if (!defined(options.selectionEnd) || options.selectionEnd === null) {\n                options.selectionEnd = options.max;\n                inputs.eq(1).prop(\"value\", formatValue(options.max));\n            }\n\n            var dragHandles = that.wrapper.find(DRAG_HANDLE);\n\n            this._selection = new RangeSlider.Selection(dragHandles, that, options);\n            that._firstHandleDrag = new Slider.Drag(dragHandles.eq(0), \"firstHandle\", that, options);\n            that._lastHandleDrag = new Slider.Drag(dragHandles.eq(1), \"lastHandle\" , that, options);\n\n            that._refreshAriaAttr(options.selectionStart , options.selectionEnd);\n        },\n\n        options: {\n            name: \"RangeSlider\",\n            leftDragHandleTitle: \"drag\",\n            rightDragHandleTitle: \"drag\",\n            tooltip: { format: \"{0:#,#.##}\" },\n            selectionStart: null,\n            selectionEnd: null\n        },\n\n        enable: function(enable) {\n            var that = this,\n                options = that.options,\n                clickHandler;\n\n            that.disable();\n            if (enable === false) {\n                return;\n            }\n\n            that.wrapper\n                .removeClass(STATE_DISABLED);\n\n            that.wrapper.find(\"input\").prop(DISABLED, false);\n\n            clickHandler = function(e) {\n                var touch = getTouches(e)[0];\n\n                if (!touch) {\n                    return;\n                }\n\n                var mousePosition = that._isHorizontal ? touch.location.pageX : touch.location.pageY,\n                    draggableArea = that._getDraggableArea(),\n                    val = that._getValueFromPosition(mousePosition, draggableArea),\n                    target = $(e.target),\n                    from, to, drag;\n\n                if (target.hasClass(\"k-draghandle\")) {\n                    that.wrapper.find(\".\" + STATE_FOCUSED).removeClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n                    target.addClass(STATE_FOCUSED + \" \" + STATE_SELECTED);\n                    return;\n                }\n\n                if (val < options.selectionStart) {\n                    from = val;\n                    to = options.selectionEnd;\n                    drag = that._firstHandleDrag;\n                } else if (val > that.selectionEnd) {\n                    from = options.selectionStart;\n                    to = val;\n                    drag = that._lastHandleDrag;\n                } else {\n                    if (val - options.selectionStart <= options.selectionEnd - val) {\n                        from = val;\n                        to = options.selectionEnd;\n                        drag = that._firstHandleDrag;\n                    } else {\n                        from = options.selectionStart;\n                        to = val;\n                        drag = that._lastHandleDrag;\n                    }\n                }\n\n                drag.dragstart(e);\n                that._setValueInRange(from, to);\n                that._focusWithMouse(drag.element);\n            };\n\n            that.wrapper\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR)\n                    .on(TRACK_MOUSE_DOWN, clickHandler)\n                    .end()\n                    .on(TRACK_MOUSE_DOWN, function() {\n                        $(document.documentElement).one(\"selectstart\", kendo.preventDefault);\n                    })\n                    .on(TRACK_MOUSE_UP, function() {\n                        if (that._activeDragHandle) {\n                            that._activeDragHandle._end();\n                        }\n                    });\n\n            that.wrapper\n                .find(DRAG_HANDLE)\n                .attr(TABINDEX, 0)\n                .on(MOUSE_UP, function() {\n                    that._setTooltipTimeout();\n                })\n                .on(CLICK, function(e) {\n                    that._focusWithMouse(e.target);\n                    e.preventDefault();\n                })\n                .on(FOCUS, that._focus.bind(that))\n                .on(BLUR, that._blur.bind(that));\n\n            that.wrapper.find(DRAG_HANDLE)\n                .off(KEY_DOWN, kendo.preventDefault)\n                .eq(0).on(KEY_DOWN,\n                    (function(e) {\n                        this._keydown(e, \"firstHandle\");\n                    }).bind(that)\n                )\n                .end()\n                .eq(1).on(KEY_DOWN,\n                    (function(e) {\n                        this._keydown(e, \"lastHandle\");\n                    }).bind(that)\n                );\n\n            that.options.enabled = true;\n        },\n\n        disable: function() {\n            var that = this;\n\n            that.wrapper\n                .addClass(STATE_DISABLED);\n\n            that.wrapper.find(\"input\").prop(DISABLED, DISABLED);\n\n            that.wrapper\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR).off(TRACK_MOUSE_DOWN).off(TRACK_MOUSE_UP);\n\n            that.wrapper\n                .find(DRAG_HANDLE)\n                .attr(TABINDEX, -1)\n                .off(MOUSE_UP)\n                .off(KEY_DOWN)\n                .off(CLICK)\n                .off(FOCUS)\n                .off(BLUR);\n\n            that.options.enabled = false;\n        },\n\n        _keydown: function(e, handle) {\n            var that = this,\n                selectionStartValue = that.options.selectionStart,\n                selectionEndValue = that.options.selectionEnd,\n                dragSelectionStart,\n                dragSelectionEnd,\n                activeHandleDrag;\n\n            if (e.keyCode in that._keyMap) {\n\n                that._clearTooltipTimeout();\n\n                if (handle == \"firstHandle\") {\n                    activeHandleDrag = that._activeHandleDrag = that._firstHandleDrag;\n                    selectionStartValue = that._keyMap[e.keyCode](selectionStartValue);\n\n                    if (selectionStartValue > selectionEndValue) {\n                        selectionEndValue = selectionStartValue;\n                    }\n                } else {\n                    activeHandleDrag = that._activeHandleDrag = that._lastHandleDrag;\n                    selectionEndValue = that._keyMap[e.keyCode](selectionEndValue);\n\n                    if (selectionStartValue > selectionEndValue) {\n                        selectionStartValue = selectionEndValue;\n                    }\n                }\n\n                that._setValueInRange(round(selectionStartValue), round(selectionEndValue));\n\n                dragSelectionStart = Math.max(selectionStartValue, that.options.selectionStart);\n                dragSelectionEnd = Math.min(selectionEndValue, that.options.selectionEnd);\n\n                activeHandleDrag.selectionEnd = Math.max(dragSelectionEnd, that.options.selectionStart);\n                activeHandleDrag.selectionStart = Math.min(dragSelectionStart, that.options.selectionEnd);\n\n                activeHandleDrag._updateTooltip(that.value()[that._activeHandle]);\n\n                e.preventDefault();\n            }\n        },\n\n        _update: function(selectionStart, selectionEnd) {\n            var that = this,\n                values = that.value();\n\n            var change = values[0] != selectionStart || values[1] != selectionEnd;\n\n            that.value([selectionStart, selectionEnd]);\n\n            if (change) {\n                that.trigger(CHANGE, {\n                    values: [selectionStart, selectionEnd],\n                    value: [selectionStart, selectionEnd]\n                });\n            }\n        },\n\n        value: function(value) {\n            if (value && value.length) {\n                return this._value(value[0], value[1]);\n            } else {\n                return this._value();\n            }\n        },\n\n        _value: function(start, end) {\n            var that = this,\n                options = that.options,\n                selectionStart = options.selectionStart,\n                selectionEnd = options.selectionEnd;\n\n            if (isNaN(start) && isNaN(end)) {\n                return [selectionStart, selectionEnd];\n            } else {\n                start = round(start);\n                end = round(end);\n            }\n\n            if (start >= options.min && start <= options.max &&\n                end >= options.min && end <= options.max && start <= end) {\n                if (selectionStart != start || selectionEnd != end) {\n                    that.element.find(\"input\")\n                        .eq(0).prop(\"value\", formatValue(start))\n                        .end()\n                        .eq(1).prop(\"value\", formatValue(end));\n\n                    options.selectionStart = start;\n                    options.selectionEnd = end;\n                    that._refresh();\n                    that._refreshAriaAttr(start, end);\n                }\n            }\n        },\n\n        values: function(start, end) {\n            if (isArray(start)) {\n                return this._value(start[0], start[1]);\n            } else {\n                return this._value(start, end);\n            }\n        },\n\n        _refresh: function() {\n            var that = this,\n                options = that.options;\n\n            that.trigger(MOVE_SELECTION, {\n                values: [options.selectionStart, options.selectionEnd],\n                value: [options.selectionStart, options.selectionEnd]\n            });\n\n            if (options.selectionStart == options.max && options.selectionEnd == options.max) {\n                that._setZIndex(\"firstHandle\");\n            }\n        },\n\n        _refreshAriaAttr: function(start, end) {\n            var that = this,\n                dragHandles = that.wrapper.find(DRAG_HANDLE),\n                drag = that._activeHandleDrag,\n                formattedValue;\n\n            formattedValue = that._getFormattedValue([start, end], drag);\n\n            dragHandles.eq(0).attr(ARIA_VALUENOW, start);\n            dragHandles.eq(1).attr(ARIA_VALUENOW, end);\n            dragHandles.attr(ARIA_VALUETEXT, formattedValue);\n        },\n\n        _setValueInRange: function(selectionStart, selectionEnd) {\n            var options = this.options;\n\n            selectionStart = math.max(math.min(selectionStart, options.max), options.min);\n\n            selectionEnd = math.max(math.min(selectionEnd, options.max), options.min);\n\n            if (selectionStart == options.max && selectionEnd == options.max) {\n                this._setZIndex(\"firstHandle\");\n            }\n\n            this._update(math.min(selectionStart, selectionEnd), math.max(selectionStart, selectionEnd));\n        },\n\n        _setZIndex: function(type) {\n            this.wrapper.find(DRAG_HANDLE).each(function(index) {\n                $(this).css(\"z-index\", type == \"firstHandle\" ? 1 - index : index);\n            });\n        },\n\n        _formResetHandler: function() {\n            var that = this,\n                options = that.options;\n\n            setTimeout(function() {\n                var inputs = that.element.find(\"input\");\n                var start = inputs[0].value;\n                var end = inputs[1].value;\n                that.values(start === \"\" || isNaN(start) ? options.min : start, end === \"\" || isNaN(end) ? options.max : end);\n            });\n        },\n\n        destroy: function() {\n            var that = this;\n\n            SliderBase.fn.destroy.call(that);\n\n            that.wrapper.off(NS)\n                .find(TICK_SELECTOR + \", \" + TRACK_SELECTOR).off(NS)\n                .end()\n                .find(DRAG_HANDLE).off(NS);\n\n            that._firstHandleDrag.draggable.destroy();\n            that._lastHandleDrag.draggable.destroy();\n        }\n    });\n\n    RangeSlider.Selection = function(dragHandles, that, options) {\n        function moveSelection(value) {\n            value = value || [];\n            var selectionStartValue = value[0] - options.min,\n                selectionEndValue = value[1] - options.min,\n                selectionStartIndex = math.ceil(round(selectionStartValue / options.smallStep)),\n                selectionEndIndex = math.ceil(round(selectionEndValue / options.smallStep)),\n                selectionStart = that._pixelSteps[selectionStartIndex],\n                selectionEnd = that._pixelSteps[selectionEndIndex],\n                rtlCorrection = that._isRtl ? 2 : 0;\n\n            dragHandles.eq(0).css(that._position, selectionStart - rtlCorrection)\n                       .end()\n                       .eq(1).css(that._position, selectionEnd - rtlCorrection);\n\n            makeSelection(selectionStart, selectionEnd);\n        }\n\n        function makeSelection(selectionStart, selectionEnd) {\n            var selection,\n                selectionPosition,\n                selectionDiv = that._trackDiv.find(\".k-slider-selection\");\n\n            selection = math.abs(selectionStart - selectionEnd);\n\n            selectionDiv[that._sizeFn](selection);\n            if (that._isRtl) {\n                selectionPosition = math.max(selectionStart, selectionEnd);\n                selectionDiv.css(\"right\", that._maxSelection - selectionPosition - 1);\n            } else {\n                selectionPosition = math.min(selectionStart, selectionEnd);\n                selectionDiv.css(that._position, selectionPosition - 1);\n            }\n        }\n\n        moveSelection(that.value());\n\n        that.bind([ CHANGE, SLIDE, MOVE_SELECTION ], function(e) {\n            moveSelection(e.values);\n        });\n    };\n\n    kendo.ui.plugin(RangeSlider);\n\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","Widget","ui","Draggable","outerWidth","_outerWidth","outerHeight","_outerHeight","extend","format","parse","parseFloat","isArray","Array","math","Math","support","pointers","msPointers","CHANGE","SLIDE","NS","MOUSE_DOWN","TRACK_MOUSE_DOWN","MOUSE_UP","TRACK_MOUSE_UP","MOVE_SELECTION","KEY_DOWN","CLICK","MOUSE_OVER","FOCUS","BLUR","DRAG_HANDLE","TRACK_SELECTOR","TICK_SELECTOR","STATE_SELECTED","STATE_FOCUSED","STATE_DISABLED","DISABLED","UNDEFINED","TABINDEX","getTouches","ARIA_VALUETEXT","ARIA_VALUENOW","SliderBase","init","element","options","that","this","fn","call","_isHorizontal","orientation","_isRtl","isRtl","_position","_sizeFn","_outerSize","tooltip","enabled","smallStep","Error","_createHtml","_trackDiv","wrapper","find","_maxSelection","_sliderItemsInit","_reset","_tabindex","rtlDirectionSign","_keyMap","37","step","40","39","38","35","setValue","max","36","min","33","largeStep","34","_ariaLabel","notify","events","tickPlacement","_distance","round","_resize","remove","_refresh","enable","sizeBetweenTicks","pixelWidths","_calculateItemsWidth","floor","removeFraction","parent","before","createSliderItems","_setItemsTitle","_calculateSteps","_setItemsLargeTick","first","addClass","last","getSize","dimensions","items","titleNumber","count","length","i","attr","item","value","makeArray","reverse","_values","valueWithoutFraction","html","css","itemsCount","trackDivSize","distance","preciseItemsCount","pixelStep","itemWidth","_roundWidths","pixelWidthsArray","balance","_addAdditionalSize","additionalSize","parseInt","val","selection","ceil","lastItem","splice","pop","_pixelSteps","_getValueFromPosition","mousePosition","draggableArea","position","halfStep","startPoint","abs","_getFormattedValue","drag","tooltipTemplate","selectionStart","selectionEnd","type","template","_getDraggableArea","offset","getOffset","left","top","endPoint","inputs","eq","prop","formatValue","wrap","createWrapper","hide","parents","showButtons","after","createButton","createTrack","_focus","e","target","_drag","_firstHandleDrag","_activeHandle","_lastHandleDrag","_activeHandleDrag","_updateTooltip","_focusWithMouse","idx","is","index","setTimeout","focus","_setTooltipTimeout","_blur","removeClass","_removeTooltip","_tooltipTimeout","_clearTooltipTimeout","clearTimeout","tooltipDiv","stop","formId","form","closest","_form","on","_formResetHandler","bind","setOptions","destroy","off","isHorizontal","orientationCssClass","style","cssClasses","tickPlacementCssClass","buttonCssClass","result","dragHandleCount","firstDragHandleTitle","leftDragHandleTitle","dragHandleTitle","elementValue","minElementValue","maxElementValue","rightDragHandleTitle","stepValue","replace","cultures","current","numberFormat","calculatePrecision","number","toString","precision","split","power","pow","parseAttr","getAttribute","defined","Slider","dragHandle","_selection","Selection","Drag","_refreshAriaAttr","increaseButtonTitle","decreaseButtonTitle","clickHandler","move","disable","touch","location","pageX","pageY","hasClass","_update","dragstart","preventDefault","end","document","documentElement","one","_end","sign","newVal","_nextValueByIndex","_valueIndex","_setValueInRange","mouseDownHandler","which","timeout","timer","setInterval","_clearTimer","currentTarget","_keydown","change","trigger","isNaN","formattedValue","_tooltipDiv","text","clearInterval","keyCode","draggable","RangeSlider","moveSelection","selectionValue","selectionDiv","rtlCorrection","sender","owner","_dragstart","dragend","dragcancel","click","prototype","_activeDragHandle","userEvents","cancel","_setZIndex","oldVal","_createTooltip","wnd","calloutCssClass","appendTo","body","tooltipInnerDiv","_scrollOffset","scrollTop","scrollLeft","moveTooltip","x","y","slideParams","constrainValue","values","_disposeAll","noAnimation","fadeOut","margin","viewport","callout","width","height","dragHandles","sdhOffset","diff","anchorSize","_flip","_fit","size","viewPortEnd","output","maxOverflow","plugin","firstInput","secondInput","console","warn","from","to","handle","selectionStartValue","selectionEndValue","dragSelectionStart","dragSelectionEnd","activeHandleDrag","_value","start","each","selectionStartIndex","selectionEndIndex","makeSelection","selectionPosition","amd","a1","a2","a3"],"mappings":"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"}