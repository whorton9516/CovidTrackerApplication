/**
 * Kendo UI v2022.3.913 (http://www.telerik.com/kendo-ui)
 * Copyright 2022 Progress Software Corporation and/or one of its subsidiaries or affiliates. All rights reserved.
 *
 * Kendo UI commercial licenses may be obtained at
 * http://www.telerik.com/purchase/license-agreement/kendo-ui-complete
 * If you do not own a commercial license, this file shall be governed by the trial license terms.
 */
!function(define){define("kendo.groupable.min",["kendo.core.min","kendo.draganddrop.min"],function(){var t={id:"groupable",name:"Groupable",category:"framework",depends:["core","draganddrop"],advanced:true},u=window.kendo.jQuery,e=void 0,f=window.kendo,d=f.ui.Widget,s=f._outerWidth,l=f.attr,b=u.extend,r=u.each,p=false,k="dir",a="field",n="title",g="asc",_="desc",i="removeGroup",h="group-sort",m=".kendoGroupable",C="change",o=f.template('<div class="k-group-indicator" data-#=data.ns#field="${data.field}" ${data.id ? ("data-" + data.ns + "id="+data.id) : ""} data-#=data.ns#title="${data.title || ""}" data-#=data.ns#dir="${data.dir || "asc"}">'+'<a role="button" title="(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})" href="\\#" class="k-link">'+'<span class="k-icon k-i-sort-${(data.dir || "asc") == "asc" ? "asc-sm" : "desc-sm"}" title="(sorted ${(data.dir || "asc") == "asc" ? "ascending": "descending"})"></span>'+"${data.title ? data.title: data.field}"+"</a>"+'<a href="\\#" role="button" data-role="button" aria-label="Remove grouping by ${data.title || data.field} field" class="k-button k-button-md k-rounded-md k-button-flat k-button-flat-base k-icon-button">'+'<span class="k-button-icon k-icon k-i-close"></span>'+"</a>"+"</div>",{useWithBlock:false}),I=function(t){var e=t.attr(f.attr("title"));if(e)e=f.htmlEncode(e);return u('<div class="k-group-clue k-drag-clue" />').html(e||t.attr(f.attr("field"))).prepend('<span class="k-icon k-drag-status k-i-cancel"></span>')},v=u('<div class="k-grouping-dropclue"/>'),c=d.extend({init:function(t,e){var c=this,r=f.guid(),i=c._intializePositions.bind(c),a,n,o=c._dropCuePositions=[];d.fn.init.call(c,t,e);p=f.support.isRtl(t);n=p?"right":"left";c.draggable=a=c.options.draggable||new f.ui.Draggable(c.element,{filter:c.options.draggableElements,hint:I,group:r});c.groupContainer=u(c.options.groupContainer,c.element).kendoDropTarget({group:a.options.group,dragenter:function(t){if(c._canDrag(t.draggable.currentTarget)){t.draggable.hint.find(".k-drag-status").removeClass("k-i-cancel").addClass("k-i-plus");v.css(n,0).appendTo(c.groupContainer)}},dragleave:function(t){t.draggable.hint.find(".k-drag-status").removeClass("k-i-plus").addClass("k-i-cancel");v.remove()},drop:function(g){var t=g.draggable.currentTarget,e=t.attr(f.attr("field")),r=t.attr(f.attr("title")),a=t.attr("id"),n=c.indicator(e),i=c._dropCuePositions,o=i[i.length-1],d;var s=b({},c.options.sort,t.data(h));var l=s.dir;if(!t.hasClass("k-group-indicator")&&!c._canDrag(t))return;if(o){d=c._dropCuePosition(f.getOffset(v).left+parseInt(o.element.css("marginLeft"),10)*(p?-1:1)+parseInt(o.element.css("marginRight"),10));if(d&&c._canDrop(u(n),d.element,d.left)){if(d.before)d.element.before(n||c.buildIndicator(e,r,l,a));else d.element.after(n||c.buildIndicator(e,r,l,a));c._setIndicatorSortOptions(e,s);c._change()}}else{c.groupContainer.empty();c.groupContainer.append(c.buildIndicator(e,r,l,a));c._setIndicatorSortOptions(e,s);c._change()}}}).kendoDraggable({filter:"div.k-group-indicator",hint:I,group:a.options.group,dragcancel:c._dragCancel.bind(c),dragstart:function(t){var e=t.currentTarget,r=parseInt(e.css("marginLeft"),10),a=e.position(),n=p?a.left-r:a.left+s(e);i();v.css("left",n).appendTo(c.groupContainer);this.hint.find(".k-drag-status").removeClass("k-i-cancel").addClass("k-i-plus")},dragend:function(){c._dragEnd(this)},drag:c._drag.bind(c)}).on("click"+m,".k-button",function(t){t.preventDefault();c._removeIndicator(u(this).parent())}).on("click"+m,".k-link",function(t){var e=u(this).parent();var r=e.attr(l(k))===g?_:g;e.attr(l(k),r);c._change();t.preventDefault()});a.bind(["dragend","dragcancel","dragstart","drag"],{dragend:function(){c._dragEnd(this)},dragcancel:c._dragCancel.bind(c),dragstart:function(t){var e,r,a;if(!c.options.allowDrag&&!c._canDrag(t.currentTarget)){t.preventDefault();return}i();if(o.length){e=o[o.length-1].element;r=parseInt(e.css("marginRight"),10);a=e.position().left+s(e)+r}else a=0},drag:c._drag.bind(c)});c.dataSource=c.options.dataSource;if(c.dataSource&&c._refreshHandler)c.dataSource.unbind(C,c._refreshHandler);else c._refreshHandler=c.refresh.bind(c);if(c.dataSource){c.dataSource.bind("change",c._refreshHandler);c.refresh()}},refresh:function(){var i=this,t=i.dataSource;var e=t.group()||[];var o=l(a);var d=l(n);var s;if(i.groupContainer){i.groupContainer.empty();r(e,function(t,e){var r=e.field;var a=e.dir;var n=i.element.find(i.options.filter).filter(function(){return u(this).attr(o)===r});s=i.buildIndicator(r,n.attr(d),a,n.attr("id"));i.groupContainer.append(s);i._setIndicatorSortOptions(r,b({},i.options.sort,{dir:a,compare:e.compare}))})}i._invalidateGroupContainer()},destroy:function(){var t=this;d.fn.destroy.call(t);t.groupContainer.off(m);if(t.groupContainer.data("kendoDropTarget"))t.groupContainer.data("kendoDropTarget").destroy();if(t.groupContainer.data("kendoDraggable"))t.groupContainer.data("kendoDraggable").destroy();if(!t.options.draggable)t.draggable.destroy();if(t.dataSource&&t._refreshHandler){t.dataSource.unbind("change",t._refreshHandler);t._refreshHandler=null}t.groupContainer=t.element=t.draggable=null},events:["change","removeGroup"],options:{name:"Groupable",filter:"th",draggableElements:"th",messages:{empty:"Drag a column header and drop it here to group by that column"},sort:{dir:g,compare:null}},indicator:function(e){var t=u(".k-group-indicator",this.groupContainer);return u.grep(t,function(t){return u(t).attr(f.attr("field"))===e})[0]},buildIndicator:function(t,e,r,a){var n=this;var i=o({ns:f.ns,field:t.replace(/"/g,"'"),title:e,id:a,dir:r||(n.options.sort||{}).dir||g});return i},_setIndicatorSortOptions:function(t,e){var r=u(this.indicator(t));r.data(h,e)},aggregates:function(){var t=this;var a;var n;var i;return t.element.find(t.options.filter).map(function(){var t=u(this),e=t.attr(f.attr("aggregates")),r=t.attr(f.attr("field"));if(e&&e!==""){a=e.split(",");e=[];for(n=0,i=a.length;n<i;n++)e.push({field:r,aggregate:a[n]})}return e}).toArray()},descriptors:function(){var a=this,t=u(".k-group-indicator",a.groupContainer),n,i=a.aggregates();return u.map(t,function(t){t=u(t);n=t.attr(f.attr("field"));var e=a.options.sort||{};var r=t.data(h)||{};return{field:n,dir:t.attr(f.attr("dir")),aggregates:i||[],colID:t.attr(f.attr("id")),compare:r.compare||e.compare}})},_removeIndicator:function(t){var e=this;e.trigger(i,{field:t.attr(f.attr("field")),colID:t.attr(f.attr("id"))});t.off();t.removeData();t.remove();e._invalidateGroupContainer();e._change()},_change:function(){var t=this;if(t.dataSource){var e=t.descriptors();if(t.trigger("change",{groups:e})){t.refresh();return}t.dataSource.group(e)}},_dropCuePosition:function(e){var t=this._dropCuePositions;if(!v.is(":visible")||t.length===0)return;e=Math.ceil(e);var r=t[t.length-1],a=r.left,n=r.right,i=parseInt(r.element.css("marginLeft"),10),o=parseInt(r.element.css("marginRight"),10);if(e>=n&&!p||e<a&&p)e={left:r.element.position().left+(!p?s(r.element)+o:-i),element:r.element,before:false};else{e=u.grep(t,function(t){return t.left<=e&&e<=t.right||p&&e>t.right})[0];if(e)e={left:p?e.element.position().left+s(e.element)+o:e.element.position().left-i,element:e.element,before:true}}return e},_drag:function(t){var e=this._dropCuePosition(t.x.location);if(e)v.css({left:e.left,right:"auto"})},_canDrag:function(t){var e=t.attr(f.attr("field"));return t.attr(f.attr("groupable"))!="false"&&e&&(t.hasClass("k-group-indicator")||!this.indicator(e))},_canDrop:function(t,e,r){var a=t.next(),n=t[0]!==e[0]&&(!a[0]||e[0]!==a[0]||(!p&&r>a.position().left||p&&r<a.position().left));return n},_dragEnd:function(t){var e=this,r=t.currentTarget.attr(f.attr("field")),a=e.indicator(r);if(t!==e.options.draggable&&!t.dropped&&a)e._removeIndicator(u(a));e._dragCancel()},_dragCancel:function(){v.remove();this._dropCuePositions=[]},_intializePositions:function(){var t=this,e=u(".k-group-indicator",t.groupContainer),r;t._dropCuePositions=u.map(e,function(t){t=u(t);r=f.getOffset(t).left;return{left:parseInt(r,10),right:parseInt(r+s(t),10),element:t}})},_invalidateGroupContainer:function(){var t=this.groupContainer;if(t&&t.is(":empty"))t.html(this.options.messages.empty)}});return f.ui.plugin(c),window.kendo})}("function"==typeof define&&define.amd?define:function(t,e,r){(r||e)()});
//# sourceMappingURL=kendo.groupable.min.js.map
