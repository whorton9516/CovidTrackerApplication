{"version":3,"file":"kendo.toolbar.min.js","sources":["kendo.toolbar.js"],"sourcesContent":["(function(f, define) {\n    define('kendo.toolbar',[ \"kendo.core\", \"kendo.userevents\", \"kendo.popup\", \"kendo.html.button\", \"kendo.splitbutton\", \"kendo.dropdownbutton\" ], f);\n})(function() {\n\nvar __meta__ = {\n    id: \"toolbar\",\n    name: \"ToolBar\",\n    category: \"web\",\n    description: \"The ToolBar widget displays one or more command buttons divided into groups.\",\n    depends: [ \"core\", \"html.button\", \"splitbutton\", \"dropdownbutton\" ]\n};\n\n(function($, undefined) {\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        ui = kendo.ui,\n        Widget = ui.Widget,\n        isFunction = kendo.isFunction,\n        keys = kendo.keys,\n        outerWidth = kendo._outerWidth,\n        ns = \".kendoToolBar\",\n        TOOLBAR = \"k-toolbar\",\n        KBUTTON = \"k-button\",\n        OVERFLOW_BUTTON = \"k-overflow-button\",\n        TOGGLE_BUTTON = \"k-toggle-button\",\n        BUTTON_GROUP = \"k-button-group\",\n        SPLIT_BUTTON = \"k-split-button\",\n        MENU_BUTTON = \"k-menu-button\",\n        KSEPARATOR = \"k-separator\",\n        SPACER_CLASS = \"k-spacer\",\n        POPUP = \"k-popup\",\n        RESIZABLE_TOOLBAR = \"k-toolbar-resizable\",\n        STATE_SELECTED = \"k-selected\",\n        STATE_DISABLED = \"k-disabled\",\n        STATE_HIDDEN = \"k-hidden\",\n        FORCE_HIDDEN = \"k-force-hidden\",\n        GROUP_START = \"k-group-start\",\n        GROUP_END = \"k-group-end\",\n        MENU_LINK = \"k-menu-link\",\n        MENU_ITEM = \"k-menu-item\",\n        OVERFLOW_GROUP = \"k-overflow-group\",\n        OVERFLOW_HIDDEN = \"k-overflow-hidden\",\n        OVERFLOW_ANCHOR = \"k-overflow-anchor\",\n        OVERFLOW_CONTAINER = \"k-overflow-container\",\n        OVERFLOW_WRAPPER = \"k-overflow-wrapper\",\n        FIRST_TOOLBAR_VISIBLE = \"k-toolbar-first-visible\",\n        LAST_TOOLBAR_VISIBLE = \"k-toolbar-last-visible\",\n        SPLIT_BUTTON_ARROW = \"k-split-button-arrow\",\n        TEMPLATE_ITEM = \"k-toolbar-item\",\n        DROPDOWNLIST = \"k-dropdownlist\",\n        COLORPICKER = \"k-colorpicker\",\n        INPUT_BUTTON = \"k-input-button\",\n        KFOCUS = \"k-focus\",\n\n        ARIA_DISABLED = \"aria-disabled\",\n        ARIA_PRESSED = \"aria-pressed\",\n        ARIA_LEBEL = \"aria-label\",\n\n        CLICK = \"click\",\n        TOGGLE = \"toggle\",\n        OPEN = \"open\",\n        CLOSE = \"close\",\n        FOCUS = \"focus\",\n        KEYDOWN = \"keydown\",\n        TAP = \"tap\",\n\n        SPACER = \"spacer\",\n        BOTH = \"both\",\n        PRIMARY = \"primary\",\n        HREF = \"href\",\n        ROLE = \"role\",\n        BUTTON = \"button\",\n        SPLITBUTTON = \"splitButton\",\n        DROPDOWNBUTTON = \"dropDownButton\",\n        SEPARATOR = \"separator\",\n        OVERFLOW = \"overflow\",\n        NEXT = \"next\",\n        PREV = \"prev\",\n        TABINDEX = \"tabindex\",\n        TEMPLATE = \"template\",\n        INPUT = \"input\",\n        SELECT = \"select\",\n        CHECKBOX = \"checkbox\",\n        HIDDEN = \"hidden\",\n        GROUP = \"group\",\n\n        KENDO_FOCUSABLE = \":kendoFocusable\",\n\n        OVERFLOW_OPEN = \"overflowOpen\",\n        OVERFLOW_CLOSE = \"overflowClose\",\n        OVERFLOW_NEVER = \"never\",\n        OVERFLOW_AUTO = \"auto\",\n        OVERFLOW_ALWAYS = \"always\",\n\n        OPTION_LIST_SUFFIX = \"_optionlist\",\n\n        KENDO_UID_ATTR = kendo.attr(\"uid\"),\n\n        POPUP_ITEM_TEMPLATE = '<li class=\"k-menu-item k-item\">',\n\n        MENU_LINK_SPAN = '<span tabindex=\"0\" class=\"k-link k-menu-link\">' +\n                '<span class=\"k-menu-link-text\">#:text#</span>' +\n            '</span>',\n\n        MENU_LINK_A = '<a href=\"#:href#\" class=\"k-link k-menu-link\">' +\n                '<span class=\"k-menu-link-text\">#:text#</span>' +\n            '</a>',\n\n        EMPTY = \" \",\n        NOTHING = \"\",\n        TEXT_ITEM = \"textItem\",\n        DOT = \".\",\n        COMMA = \",\",\n        ID = \"id\",\n        UID = \"uid\";\n\n        kendo.toolbar = {};\n\n        var components = {\n            overflowAnchor: '<div tabindex=\"0\" class=\"k-overflow-anchor k-button k-button-md k-rounded-md k-button-flat k-button-flat-base\" title=\"More tools\" role=\"button\"></div>',\n            overflowContainer: '<ul class=\"k-overflow-container k-list-container\"></ul>'\n        };\n\n        kendo.toolbar.registerComponent = function(name, toolbar, overflow) {\n            components[name] = {\n                toolbar: toolbar,\n                overflow: overflow\n            };\n        };\n\n        var Item = kendo.Class.extend({\n            addOverflowAttr: function() {\n                this.element.attr(kendo.attr(OVERFLOW), this.options.overflow || OVERFLOW_AUTO);\n            },\n\n            addUidAttr: function() {\n                this.element.attr(KENDO_UID_ATTR, this.options.uid);\n            },\n\n            addIdAttr: function() {\n                if (this.options.id) {\n                    this.element.attr(ID, this.options.id);\n                }\n            },\n\n            addOverflowIdAttr: function() {\n                if (this.options.id) {\n                    this.element.attr(ID, this.options.id + \"_overflow\");\n                }\n            },\n\n            attributes: function() {\n                var attributes = this.options.attributes,\n                    classes;\n\n                if (attributes) {\n                    if (attributes.class) {\n                        classes = attributes.class;\n\n                        this.element.addClass(classes);\n\n                        delete attributes.class;\n                    }\n\n                    this.element.attr(attributes);\n\n                    attributes.class = classes;\n                }\n            },\n\n            show: function() {\n                this.element.removeClass(STATE_HIDDEN);\n                this.element.removeClass(FORCE_HIDDEN);\n                this.options.hidden = false;\n            },\n\n            hide: function() {\n                this.element.addClass(STATE_HIDDEN);\n                this.element.addClass(FORCE_HIDDEN);\n\n                if (this.overflow && this.overflowHidden) {\n                    this.overflowHidden();\n                }\n                this.options.hidden = true;\n            },\n\n            remove: function() {\n                this.element.remove();\n            },\n\n            enable: function(isEnabled) {\n                if (isEnabled === undefined) {\n                    isEnabled = true;\n                }\n                this.element.toggleClass(STATE_DISABLED, !isEnabled);\n                this.element.attr(ARIA_DISABLED, !isEnabled);\n\n                this.options.enable = isEnabled;\n            },\n\n            twin: function() {\n                var uid = this.element.attr(KENDO_UID_ATTR);\n                if (this.overflow && this.options.splitContainerId) {\n                    return $(\"#\" + this.options.splitContainerId)\n                            .find(\"[\" + KENDO_UID_ATTR + \"='\" + uid + \"']\")\n                            .data(this.options.type);\n                } else if (this.overflow) {\n                    return this.toolbar\n                            .element\n                            .find(\"[\" + KENDO_UID_ATTR + \"='\" + uid + \"']\")\n                            .data(this.options.type);\n                } else if (this.toolbar.options.resizable) {\n                    return this.toolbar\n                            .popup.element\n                            .find(\"[\" + KENDO_UID_ATTR + \"='\" + uid + \"']\")\n                            .data(this.options.type);\n                }\n            }\n        });\n\n        kendo.toolbar.Item = Item;\n\n        var BareItem = Item.extend({\n            init: function(options, toolbar) {\n                this.options = $.extend({}, this.options, options);\n                this.toolbar = toolbar;\n            }\n        });\n\n        kendo.toolbar.BareItem = BareItem;\n\n        var Button = Item.extend({\n            init: function(options, toolbar) {\n                var element = options.useButtonTag ? $('<button></button>') : $('<a role=\"button\" href></a>');\n\n                this.element = element;\n                this.options = $.extend({}, this.options, options);\n                this.toolbar = toolbar;\n\n                this.attributes();\n\n                if (options.primary) {\n                    this.options.themeColor = PRIMARY;\n                }\n\n                if (options.togglable) {\n                    element.addClass(TOGGLE_BUTTON);\n                    this.toggle(options.selected);\n                }\n\n                if (options.url !== undefined && !options.useButtonTag) {\n                    element.attr(HREF, options.url);\n                    if (options.mobile) {\n                        element.attr(kendo.attr(ROLE), BUTTON);\n                    }\n                }\n\n                if (options.group) {\n                    element.attr(kendo.attr(GROUP), options.group);\n                    this.group = this.toolbar.addToGroup(this, options.group);\n                }\n\n                if (!options.togglable && options.click && isFunction(options.click)) {\n                    this.clickHandler = options.click;\n                }\n\n                if (options.togglable && options.toggle && isFunction(options.toggle)) {\n                    this.toggleHandler = options.toggle;\n                }\n            },\n\n            options: {\n                showIcon: BOTH,\n                showText: BOTH\n            },\n\n            toggle: function(state, propagate) {\n                state = !!state;\n\n                if (this.group && state) {\n                    this.group.select(this);\n                } else if (!this.group) {\n                    this.select(state);\n                }\n\n                if (propagate && this.twin()) {\n                    this.twin().toggle(state);\n                }\n            },\n\n            getParentGroup: function() {\n                if (this.options.isChild) {\n                    return this.element.closest(DOT + BUTTON_GROUP).data(\"buttonGroup\");\n                }\n            }\n        });\n\n        kendo.toolbar.Button = Button;\n\n        var ToolBarButton = Button.extend({\n            init: function(options, toolbar) {\n                Button.fn.init.call(this, options, toolbar);\n\n                var element = this.element;\n                options = this.options;\n\n                element.addClass(KBUTTON);\n\n                this.addIdAttr();\n\n                if (options.align) {\n                    element.addClass(\"k-align-\" + options.align);\n                }\n\n                if (!!options.text && (options.showText == \"toolbar\" || options.showText == BOTH)) {\n                    if (options.mobile) {\n                        element.html('<span class=\"km-text\">' + options.text + \"</span>\");\n                    } else {\n                        element.html(options.text);\n                    }\n                } else if (!!options.text) {\n                    element.attr(ARIA_LEBEL, options.text);\n                }\n\n                if (options.icon || options.spriteCssClass || options.imageUrl) {\n                    if (options.showIcon !== \"toolbar\" && options.showIcon !== BOTH) {\n                        options.icon = null;\n                        options.spriteCssClass = null;\n                        options.imageUrl = null;\n                    }\n                }\n\n                kendo.html.renderButton(element, options);\n\n                this.addUidAttr();\n                this.addOverflowAttr();\n                this.enable(options.enable);\n\n                if (options.hidden) {\n                    this.hide();\n                }\n\n                this.element.data({\n                    type: BUTTON,\n                    button: this\n                });\n            },\n\n            select: function(selected) {\n                if (selected === undefined) {\n                    selected = false;\n                }\n\n                if (this.options.togglable) {\n                    this.element.attr(ARIA_PRESSED, selected);\n                }\n\n                this.element.toggleClass(STATE_SELECTED, selected);\n                this.options.selected = selected;\n            }\n        });\n\n        kendo.toolbar.ToolBarButton = ToolBarButton;\n\n        var OverflowButton = Button.extend({\n            init: function(options, toolbar) {\n                this.overflow = true;\n\n                Button.fn.init.call(this, $.extend({}, options), toolbar);\n\n                var element = this.element;\n                options = this.options;\n\n                if (!!options.text && (options.showText == OVERFLOW || options.showText == BOTH)) {\n                    if (options.mobile) {\n                        element.html('<span class=\"km-text\">' + options.text + \"</span>\");\n                    } else {\n                        element.html(options.text);\n                    }\n                } else if (!!options.text) {\n                    element.attr(ARIA_LEBEL, options.text);\n                }\n\n                if (options.icon || options.spriteCssClass || options.imageUrl) {\n                    if (options.showIcon !== OVERFLOW && options.showIcon !== BOTH) {\n                        options.icon = null;\n                        options.spriteCssClass = null;\n                        options.imageUrl = null;\n                    }\n                }\n\n                kendo.html.renderButton(element, options);\n\n                if (!options.isChild) {\n                    this._wrap();\n                }\n\n                this.addOverflowIdAttr();\n                this.attributes();\n                this.addUidAttr();\n                this.addOverflowAttr();\n                this.enable(options.enable);\n\n                element.addClass(OVERFLOW_BUTTON + EMPTY + KBUTTON);\n\n                if (options.hidden) {\n                    this.hide();\n                }\n\n                if (options.togglable) {\n                    this.toggle(options.selected);\n                }\n\n                this.element.data({\n                    type: BUTTON,\n                    button: this\n                });\n            },\n\n            _wrap: function() {\n                this.element = this.element.wrap(POPUP_ITEM_TEMPLATE).parent();\n            },\n\n            overflowHidden: function() {\n                this.element.addClass(OVERFLOW_HIDDEN);\n            },\n\n            select: function(selected) {\n                if (selected === undefined) {\n                    selected = false;\n                }\n\n                if (this.options.isChild) {\n                    this.element.toggleClass(STATE_SELECTED, selected);\n                } else {\n                    this.element.find(DOT + KBUTTON).toggleClass(STATE_SELECTED, selected);\n                }\n                this.options.selected = selected;\n            }\n        });\n\n        kendo.toolbar.OverflowButton = OverflowButton;\n        kendo.toolbar.registerComponent(BUTTON, ToolBarButton, OverflowButton);\n\n        var ButtonGroup = Item.extend({\n            createButtons: function(buttonConstructor) {\n                var options = this.options;\n                var items = options.buttons || [];\n                var item;\n\n                for (var i = 0; i < items.length; i++) {\n                    if (!items[i].uid) {\n                        items[i].uid = kendo.guid();\n                    }\n                    item = new buttonConstructor($.extend({ mobile: options.mobile, isChild: true, type: BUTTON }, items[i]), this.toolbar);\n                    item.element.appendTo(this.element);\n                }\n            },\n\n            refresh: function() {\n                this.element.children().filter(\":not('.\" + STATE_HIDDEN + \"')\").first().addClass(GROUP_START);\n                this.element.children().filter(\":not('.\" + STATE_HIDDEN + \"')\").last().addClass(GROUP_END);\n            }\n        });\n\n        kendo.toolbar.ButtonGroup = ButtonGroup;\n\n        var ToolBarButtonGroup = ButtonGroup.extend({\n            init: function(options, toolbar) {\n                var element = this.element = $('<div></div>');\n                this.options = options;\n                this.toolbar = toolbar;\n\n                this.addIdAttr();\n\n                if (options.align) {\n                    element.addClass(\"k-align-\" + options.align);\n                }\n\n                this.createButtons(ToolBarButton);\n                this.attributes();\n                this.addUidAttr();\n                this.addOverflowAttr();\n                this.refresh();\n\n                element.addClass(BUTTON_GROUP);\n\n                if (options.hidden) {\n                    this.hide();\n                }\n\n                this.element.data({\n                    type: \"buttonGroup\",\n                    buttonGroup: this\n                });\n            }\n        });\n\n        kendo.toolbar.ToolBarButtonGroup = ToolBarButtonGroup;\n\n        var OverflowButtonGroup = ButtonGroup.extend({\n            init: function(options, toolbar) {\n                var element = this.element = $('<li></li>');\n                this.options = options;\n                this.toolbar = toolbar;\n                this.overflow = true;\n\n                this.addOverflowIdAttr();\n\n                this.createButtons(OverflowButton);\n                this.attributes();\n                this.addUidAttr();\n                this.addOverflowAttr();\n                this.refresh();\n\n                element.addClass((options.mobile ? NOTHING : BUTTON_GROUP) + EMPTY + OVERFLOW_GROUP);\n\n                this.element.data({\n                    type: \"buttonGroup\",\n                    buttonGroup: this\n                });\n            },\n\n            overflowHidden: function() {\n                this.element.addClass(OVERFLOW_HIDDEN);\n            }\n        });\n\n        kendo.toolbar.OverflowButtonGroup = OverflowButtonGroup;\n        kendo.toolbar.registerComponent(\"buttonGroup\", ToolBarButtonGroup, OverflowButtonGroup);\n\n        var ToolBarMenuButton = ToolBarButton.extend({\n            init: function(options, toolbar) {\n                var element, img, span;\n\n                options = this.options = $.extend({}, this.options, options);\n\n                if (options.url !== undefined) {\n                    element = $(kendo.template(MENU_LINK_A)({\n                        href: options.url,\n                        text: options.text\n                    }));\n                } else {\n                    element = $(kendo.template(MENU_LINK_SPAN)({\n                        text: options.text\n                    }));\n                }\n\n                this.element = element;\n                this.toolbar = toolbar;\n\n                if (options.click && isFunction(options.click)) {\n                    this.clickHandler = options.click;\n                }\n\n                if (options.togglable && options.toggle && isFunction(options.toggle)) {\n                    this.toggleHandler = options.toggle;\n                }\n\n                if (options.imageUrl) {\n                    img = $('<img alt=\"icon\" class=\"k-image\" />').prependTo(element);\n                    img.attr(\"src\", options.imageUrl);\n                } else if (options.icon) {\n                    span = $('<span></span>').prependTo(element);\n                    span.attr(\"class\", \"k-icon k-i-\" + options.icon);\n                } else if (options.spriteCssClass) {\n                    span = $('<span class=\"k-sprite\"></span>').prependTo(element);\n                    span.addClass(options.spriteCssClass);\n                }\n\n                this.addIdAttr();\n                this.addUidAttr();\n                this.addOverflowAttr();\n                this.attributes();\n                this.enable(options.enable);\n\n                if (options.group) {\n                    element.attr(kendo.attr(GROUP), options.group);\n                    this.group = this.toolbar.addToGroup(this, options.group);\n                }\n\n                if (options.hidden) {\n                    this.hide();\n                }\n\n                this.element.data({\n                    type: BUTTON,\n                    button: this\n                });\n            }\n        });\n\n        kendo.toolbar.ToolBarMenuButton = ToolBarMenuButton;\n\n        var ToolBarSplitButton = Item.extend({\n            init: function(options, toolbar) {\n                var that = this;\n\n                that.options = $.extend({\n                    id: options.id || options.uid,\n                    enable: true\n                }, options, {\n                    togglable: false // disable togglable for splitbutton\n                });\n\n                if (options.primary) {\n                    that.options.themeColor = PRIMARY;\n                }\n\n                if (options.showIcon === OVERFLOW) {\n                    that.options.icon = null;\n                }\n\n                if (options.showText === OVERFLOW) {\n                    that.options.text = \"\";\n                }\n\n                that.toolbar = toolbar;\n\n                that.splitButton = new ui.SplitButton($(\"<button id='\" + that.options.id + \"'>\" + that.options.text + \"</button>\"),\n                                                         $.extend({}, that.options, {\n                                                             items: that._extend(options.menuButtons),\n                                                        }), toolbar.options);\n                that.element = that.splitButton.wrapper;\n\n                that.splitButton.bind(CLICK, toolbar._buttonClick.bind(toolbar));\n                that.splitButton.bind(CLOSE, that._close.bind(that));\n                that.splitButton.bind(OPEN, that._open.bind(that));\n\n                that.splitButton.element.data({\n                    type: SPLITBUTTON,\n                    button: that,\n                    splitButton: that\n                });\n\n                that.splitButton.wrapper.data({\n                    type: SPLITBUTTON,\n                    button: that,\n                    splitButton: that\n                });\n\n                that.addOverflowAttr();\n                that.addUidAttr();\n                that.attributes();\n                that.addMenuAttributes();\n\n                if (that.options.enable === false) {\n                    that.enable(this.options.enable);\n                }\n\n                if (that.options.hidden) {\n                    that.hide();\n                }\n            },\n            _open: function(ev) {\n                var that = this;\n                var isDefaultPrevented = that.toolbar.trigger(OPEN, { target: that.element });\n                if (isDefaultPrevented) {\n                    ev.preventDefault();\n                }\n            },\n            _close: function(ev) {\n                var that = this;\n                var isDefaultPrevented = that.toolbar.trigger(CLOSE, { target: that.element });\n                if (isDefaultPrevented) {\n                    ev.preventDefault();\n                }\n                that.splitButton.element.trigger(FOCUS);\n            },\n            _extend: function(items) {\n                var that = this;\n                return items.map(function(item) {\n                    var itemInstance = new BareItem(item, that.toolbar);\n                    return $.extend({}, item, {\n                        togglable: false,\n                        data: function() {\n                            return {\n                                type: BUTTON,\n                                button: itemInstance,\n                                splitButton: that\n                            };\n                        }\n                    });\n                });\n            },\n            addMenuAttributes: function() {\n                var that = this,\n                    items = that.splitButton.items(),\n                    itemInstance;\n\n                items.each(function(index, item) {\n                    item = $(item);\n                    itemInstance = item.data(BUTTON);\n                    itemInstance.element = item;\n                    itemInstance.options = $.extend({\n                        type: BUTTON,\n                        enable: true\n                    }, itemInstance.options);\n\n                    itemInstance.addOverflowAttr();\n                    itemInstance.addUidAttr();\n                });\n            },\n            remove: function() {\n                var elmToRemove = this.splitButton.wrapper;\n                this.splitButton.destroy();\n                elmToRemove.remove();\n            },\n            enable: function(enable, item) {\n                this.splitButton.enable(enable, item, true);\n\n                if (this.twin()) {\n                    this.twin().enable(enable);\n                }\n            },\n            attributes: function() {\n                var that = this,\n                    mainButton = that.splitButton.element,\n                    attributes = this.options.attributes,\n                    classes;\n\n                if (attributes) {\n                    if (attributes.class) {\n                        classes = attributes.class;\n\n                        mainButton.addClass(classes);\n\n                        delete attributes.class;\n                    }\n\n                    mainButton.attr(attributes);\n\n                    attributes.class = classes;\n                }\n            },\n        });\n\n        kendo.toolbar.ToolBarSplitButton = ToolBarSplitButton;\n\n        var OverflowSplitButton = Item.extend({\n            init: function(options, toolbar) {\n                var element = this.element = $('<li class=\"' + SPLIT_BUTTON + '\"></li>'),\n                    items = options.menuButtons,\n                    item, splitContainerId;\n\n                this.options = $.extend({}, options, { togglable: false });\n                this.toolbar = toolbar;\n                this.overflow = true;\n                splitContainerId = (options.id || options.uid) + OPTION_LIST_SUFFIX;\n\n                this.mainButton = new OverflowButton($.extend({ isChild: true }, options, { togglable: false }));\n                this.mainButton.element.appendTo(element);\n\n                for (var i = 0; i < items.length; i++) {\n                    item = new OverflowButton($.extend({ mobile: options.mobile, type: BUTTON, splitContainerId: splitContainerId, isChild: true }, items[i], { click: options.click }), this.toolbar);\n                    item.element.appendTo(element);\n                }\n\n                this.addUidAttr();\n                this.addOverflowAttr();\n\n                this.mainButton.main = true;\n\n                if (this.options.enable === false) {\n                    this.enable(this.options.enable);\n                }\n\n                element.data({\n                    type: SPLITBUTTON,\n                    splitButton: this\n                });\n            },\n\n            enable: function(isEnabled) {\n                var elements = this.element.add(this.element.find(DOT + OVERFLOW_BUTTON));\n\n                if (isEnabled === undefined) {\n                    isEnabled = true;\n                }\n\n                elements.toggleClass(STATE_DISABLED, !isEnabled);\n                elements.attr(ARIA_DISABLED, !isEnabled);\n\n                this.options.enable = isEnabled;\n            },\n\n            overflowHidden: function() {\n                this.element.addClass(OVERFLOW_HIDDEN);\n            }\n        });\n\n        kendo.toolbar.OverflowSplitButton = OverflowSplitButton;\n        kendo.toolbar.registerComponent(SPLITBUTTON, ToolBarSplitButton, OverflowSplitButton);\n\n        var ToolBarDropDownButton = Item.extend({\n            init: function(options, toolbar) {\n                var that = this;\n\n                that.options = $.extend({\n                    id: options.id || options.uid,\n                    enable: true\n                }, options, {\n                    togglable: false // disable togglable for dropdownbutton\n                });\n\n                if (options.primary) {\n                    that.options.themeColor = PRIMARY;\n                }\n\n                if (options.showIcon === OVERFLOW) {\n                    that.options.icon = null;\n                }\n\n                if (options.showText === OVERFLOW) {\n                    that.options.text = \"\";\n                }\n\n                that.toolbar = toolbar;\n\n                that.dropDownButton = new ui.DropDownButton($(\"<button id='\" + that.options.id + \"'>\" + that.options.text + \"</button>\"),\n                                                         $.extend({}, that.options, {\n                                                             items: that._extend(options.menuButtons)\n                                                        }), toolbar.options);\n                that.element = that.dropDownButton.element;\n\n                that.dropDownButton.bind(CLICK, toolbar._buttonClick.bind(toolbar));\n                that.dropDownButton.bind(CLOSE, that._close.bind(that));\n                that.dropDownButton.bind(OPEN, that._open.bind(that));\n\n                that.dropDownButton.element.data({\n                    type: DROPDOWNBUTTON,\n                    button: that,\n                    dropDownButton: that\n                });\n\n                that.addOverflowAttr();\n                that.addUidAttr();\n                that.attributes();\n                that.addMenuAttributes();\n\n                if (that.options.enable === false) {\n                    that.enable(this.options.enable);\n                }\n\n                if (that.options.hidden) {\n                    that.hide();\n                }\n            },\n            _open: function(ev) {\n                var that = this;\n                var isDefaultPrevented = that.toolbar.trigger(OPEN, { target: that.element });\n                if (isDefaultPrevented) {\n                    ev.preventDefault();\n                }\n            },\n            _close: function(ev) {\n                var that = this;\n                var isDefaultPrevented = that.toolbar.trigger(CLOSE, { target: that.element });\n                if (isDefaultPrevented) {\n                    ev.preventDefault();\n                }\n                that.dropDownButton.element.trigger(FOCUS);\n            },\n            _extend: function(items) {\n                var that = this;\n                return items.map(function(item) {\n                    var itemInstance = new BareItem(item, that.toolbar);\n                    return $.extend({}, item, {\n                        data: function() {\n                            return {\n                                type: BUTTON,\n                                button: itemInstance,\n                                dropDownButton: that\n                            };\n                        }\n                    });\n                });\n            },\n            addMenuAttributes: function() {\n                var that = this,\n                    items = that.dropDownButton.items(),\n                    itemInstance;\n\n                items.each(function(index, item) {\n                    item = $(item);\n                    itemInstance = item.data(BUTTON);\n                    itemInstance.element = item;\n                    itemInstance.options = $.extend({\n                        type: BUTTON,\n                        enable: true\n                    }, itemInstance.options);\n\n                    itemInstance.addOverflowAttr();\n                    itemInstance.addUidAttr();\n                });\n            },\n            remove: function() {\n                var elmToRemove = this.dropDownButton.element;\n                this.dropDownButton.destroy();\n                elmToRemove.remove();\n            },\n            enable: function(enable, item) {\n                this.dropDownButton.enable(enable, item, true);\n\n                if (this.twin()) {\n                    this.twin().enable(enable);\n                }\n            },\n            attributes: function() {\n                var that = this,\n                    mainButton = that.element,\n                    attributes = this.options.attributes,\n                    classes;\n\n                if (attributes) {\n                    if (attributes.class) {\n                        classes = attributes.class;\n\n                        mainButton.addClass(classes);\n\n                        delete attributes.class;\n                    }\n\n                    mainButton.attr(attributes);\n\n                    attributes.class = classes;\n                }\n            },\n        });\n\n        kendo.toolbar.ToolBarSplitButton = ToolBarSplitButton;\n\n        var OverflowTextItem = Item.extend({\n            init: function(options, toolbar) {\n                var element = this.element = $('<span></span>');\n\n                this.element = element;\n                this.options = options;\n                this.toolbar = toolbar;\n                this.overflow = true;\n\n                this.attributes();\n                this.addUidAttr();\n                this.addOverflowIdAttr();\n\n                if (options.icon && (!options.showIcon || options.showIcon !== \"toolbar\")) {\n                    element.append(\"<span class=\\\"k-icon k-i-\" + options.icon + \"\\\"></span>\");\n                }\n\n                if (options.showText !== \"toolbar\") {\n                    element.append(\"<span>\" + this.options.text + \"</span>\");\n                }\n\n                element.data({\n                    type: TEXT_ITEM,\n                    textItem: this\n                });\n            },\n\n            overflowHidden: function() {\n                this.element.addClass(OVERFLOW_HIDDEN);\n            }\n        });\n\n        var OverflowDropDownButton = Item.extend({\n            init: function(options, toolbar) {\n                var element = this.element = $('<li class=\"' + SPLIT_BUTTON + ' ' + MENU_BUTTON + '\"></li>'),\n                    items = options.menuButtons,\n                    item, splitContainerId;\n\n                this.options = $.extend({}, options, { togglable: false });\n                this.toolbar = toolbar;\n                this.overflow = true;\n                splitContainerId = (options.id || options.uid) + OPTION_LIST_SUFFIX;\n\n                this.mainButton = new OverflowTextItem($.extend({ isChild: true }, options, { togglable: false }));\n                this.mainButton.element.appendTo(element);\n\n                for (var i = 0; i < items.length; i++) {\n                    item = new OverflowButton($.extend({ mobile: options.mobile, type: BUTTON, splitContainerId: splitContainerId, isChild: true }, items[i], { click: options.click }), this.toolbar);\n                    item.element.appendTo(element);\n                }\n\n                this.addUidAttr();\n                this.addOverflowAttr();\n\n                this.mainButton.main = true;\n\n                if (this.options.enable === false) {\n                    this.enable(this.options.enable);\n                }\n\n                element.data({\n                    type: DROPDOWNBUTTON,\n                    dropDownButton: this\n                });\n            },\n\n            enable: function(isEnabled) {\n                var elements = this.element.add(this.element.find(DOT + OVERFLOW_BUTTON));\n\n                if (isEnabled === undefined) {\n                    isEnabled = true;\n                }\n\n                elements.toggleClass(STATE_DISABLED, !isEnabled);\n                elements.attr(ARIA_DISABLED, !isEnabled);\n\n                this.options.enable = isEnabled;\n            },\n\n            overflowHidden: function() {\n                this.element.addClass(OVERFLOW_HIDDEN);\n            }\n        });\n\n        kendo.toolbar.OverflowSplitButton = OverflowDropDownButton;\n        kendo.toolbar.registerComponent(DROPDOWNBUTTON, ToolBarDropDownButton, OverflowDropDownButton);\n\n        var ToolBarSeparator = Item.extend({\n            init: function(options, toolbar) {\n                var element = this.element = $('<div>&nbsp;</div>');\n\n                this.element = element;\n                this.options = options;\n                this.toolbar = toolbar;\n\n                this.attributes();\n                this.addIdAttr();\n                this.addUidAttr();\n                this.addOverflowAttr();\n\n                element.addClass(KSEPARATOR);\n                element.attr(ROLE, SEPARATOR);\n\n                element.data({\n                    type: SEPARATOR,\n                    separator: this\n                });\n            }\n        });\n\n        var OverflowSeparator = Item.extend({\n            init: function(options, toolbar) {\n                var element = this.element = $('<li>&nbsp;</li>');\n\n                this.element = element;\n                this.options = options;\n                this.toolbar = toolbar;\n                this.overflow = true;\n\n                this.attributes();\n                this.addUidAttr();\n                this.addOverflowIdAttr();\n\n                element.addClass(KSEPARATOR);\n                element.attr(ROLE, SEPARATOR);\n\n                element.data({\n                    type: SEPARATOR,\n                    separator: this\n                });\n            },\n\n            overflowHidden: function() {\n                this.element.addClass(OVERFLOW_HIDDEN);\n            }\n        });\n\n        kendo.toolbar.registerComponent(\"separator\", ToolBarSeparator, OverflowSeparator);\n\n        var ToolBarSpacer = Item.extend({\n            init: function(options, toolbar) {\n                var element = this.element = $('<div>&nbsp;</div>');\n\n                this.element = element;\n                this.options = options;\n                this.toolbar = toolbar;\n\n                element.addClass(SPACER_CLASS);\n\n                element.data({\n                    type: SPACER\n                });\n                this.addOverflowAttr();\n            }\n        });\n\n        kendo.toolbar.registerComponent(SPACER, ToolBarSpacer);\n\n        var TemplateItem = Item.extend({\n            init: function(template, options, toolbar) {\n                var element = isFunction(template) ? template(options) : template;\n\n                if (!(element instanceof jQuery)) {\n                    element = $(\"<div class='k-toolbar-item' aria-keyshortcuts='Enter'></div>\").html(element);\n                } else {\n                    element = element.wrap(\"<div class='k-toolbar-item' aria-keyshortcuts='Enter'></div>\").parent();\n                }\n\n                this.element = element;\n                this.options = options;\n                this.options.type = options.type || TEMPLATE;\n                this.toolbar = toolbar;\n\n                this.attributes();\n                this.addUidAttr();\n                this.addIdAttr();\n                this.addOverflowAttr();\n\n                if (options.hidden) {\n                    this.hide();\n                }\n\n                element.data({\n                    type: TEMPLATE,\n                    template: this\n                });\n            }\n        });\n\n        kendo.toolbar.TemplateItem = TemplateItem;\n\n        var OverflowTemplateItem = Item.extend({\n            init: function(template, options, toolbar) {\n                var element = isFunction(template) ? $(template(options)) : $(template);\n\n                if (!(element instanceof jQuery)) {\n                    element = $(\"<li></li>\").html(element);\n                } else {\n                    element = element.wrap(\"<li></li>\").parent();\n                }\n\n                this.element = element;\n                this.options = options;\n                this.options.type = TEMPLATE;\n                this.toolbar = toolbar;\n                this.overflow = true;\n\n                this.attributes();\n                this.addUidAttr();\n                this.addOverflowIdAttr();\n                this.addOverflowAttr();\n\n                element.data({\n                    type: TEMPLATE,\n                    template: this\n                });\n            },\n\n            overflowHidden: function() {\n                this.element.addClass(OVERFLOW_HIDDEN);\n            }\n        });\n\n        kendo.toolbar.OverflowTemplateItem = OverflowTemplateItem;\n\n        function toggleActive(e) {\n            if (!e.target.is(\".k-toggle-button\")) {\n                e.target.toggleClass(STATE_SELECTED, e.type == \"press\");\n            }\n        }\n\n        function actionSheetWrap(element) {\n            element = $(element);\n\n            return element.hasClass(\"km-actionsheet\") ? element.closest(\".km-popup-wrapper\") : element.addClass(\"km-widget km-actionsheet\")\n                             .wrap('<div class=\"km-actionsheet-wrapper km-actionsheet-tablet km-widget km-popup\"></div>').parent()\n                             .wrap('<div class=\"km-popup-wrapper k-popup\"></div>').parent();\n        }\n\n        function preventClick(e) {\n            if ($(e.target).closest(\"a.k-button\").length) {\n                e.preventDefault();\n            }\n        }\n\n        function findFocusableSibling(element, dir) {\n            var getSibling = dir === NEXT ? $.fn.next : $.fn.prev;\n            var getter = dir === NEXT ? $.fn.first : $.fn.last;\n            var candidate = getSibling.call(element);\n\n            if (!candidate.length && element.is(DOT + OVERFLOW_ANCHOR)) {\n                return element;\n            }\n\n            if (candidate.is(KENDO_FOCUSABLE) || !candidate.length) {\n                return candidate;\n            }\n\n            if (candidate.find(KENDO_FOCUSABLE).length) {\n                return getter.call(candidate.find(KENDO_FOCUSABLE));\n            }\n\n            return findFocusableSibling(candidate, dir);\n        }\n\n        var Group = Class.extend({\n            init: function(name) {\n                this.name = name;\n                this.buttons = [];\n            },\n\n            add: function(button) {\n                this.buttons[this.buttons.length] = button;\n            },\n\n            remove: function(button) {\n                var index = $.inArray(button, this.buttons);\n                this.buttons.splice(index, 1);\n            },\n\n            select: function(button) {\n                var tmp;\n                for (var i = 0; i < this.buttons.length; i ++) {\n                    tmp = this.buttons[i];\n\n                    tmp.select(false);\n                }\n\n                button.select(true);\n                if (button.twin()) {\n                    button.twin().select(true);\n                }\n            }\n        });\n\n        var ToolBar = Widget.extend({\n            init: function(element, options) {\n                var that = this;\n                Widget.fn.init.call(that, element, options);\n\n                options = that.options;\n                element = that.wrapper = that.element;\n\n                element.addClass(TOOLBAR + \" k-widget\");\n                element.attr(ROLE, \"toolbar\");\n\n                this.uid = kendo.guid();\n                this._isRtl = kendo.support.isRtl(element);\n                this._groups = {};\n                element.attr(KENDO_UID_ATTR, this.uid);\n\n                that.isMobile = (typeof options.mobile === \"boolean\") ? options.mobile : that.element.closest(\".km-root\")[0];\n                that.animation = that.isMobile ? { open: { effects: \"fade\" } } : {};\n\n                if (that.isMobile) {\n                    element.addClass(\"km-widget\");\n                    KBUTTON = \"km-button\";\n                    BUTTON_GROUP = \"km-buttongroup\";\n                    STATE_SELECTED = \"km-state-active\";\n                    STATE_DISABLED = \"km-state-disabled\";\n                }\n\n                if (options.resizable) {\n                    that._renderOverflow();\n                    element.addClass(RESIZABLE_TOOLBAR);\n\n                    that.overflowUserEvents = new kendo.UserEvents(that.element, {\n                        threshold: 5,\n                        allowSelection: true,\n                        filter: DOT + OVERFLOW_ANCHOR,\n                        tap: that._toggleOverflow.bind(that)\n                    });\n\n                    that._resizeHandler = kendo.onResize(function() {\n                        that.resize();\n                    });\n                } else {\n                    that.popup = { element: $([]) };\n                }\n\n                if (options.items && options.items.length) {\n                    for (var i = 0; i < options.items.length; i++) {\n                        that.add(options.items[i]);\n                    }\n\n                    if (options.resizable) {\n                        that._shrink(that.element.innerWidth());\n                    }\n                }\n\n                that.userEvents = new kendo.UserEvents(document.documentElement, {\n                    threshold: 5,\n                    allowSelection: true,\n                    filter:\n                        \"[\" + KENDO_UID_ATTR + \"=\" + that.uid + \"] a.\" + KBUTTON + COMMA + EMPTY +\n                        \"[\" + KENDO_UID_ATTR + \"=\" + that.uid + \"] .\" + OVERFLOW_ANCHOR + COMMA + EMPTY +\n                        \"[\" + KENDO_UID_ATTR + \"=\" + that.uid + \"] .\" + SPLIT_BUTTON_ARROW + COMMA + EMPTY +\n                        \"[\" + KENDO_UID_ATTR + \"=\" + that.uid + \"] .\" + TEMPLATE_ITEM + COMMA + EMPTY +\n                        \"[\" + KENDO_UID_ATTR + \"=\" + that.uid + \"] .\" + MENU_BUTTON,\n                    tap: that._buttonClick.bind(that),\n                    press: toggleActive,\n                    release: toggleActive\n                });\n\n                that.element.on(CLICK + ns, \"a.k-button\", preventClick)\n                    .on(KEYDOWN + ns, that._keydown.bind(that))\n                    .on(\"focusin\" + ns, that._focusIn.bind(that))\n                    .on(\"focusout\" + ns, that._focusOut.bind(that));\n\n                if (that.options.resizable) {\n                    that.popup.element.on(CLICK + ns, + \"a.k-button\", preventClick);\n                }\n\n                if (options.resizable) {\n                    that.overflowAnchor.appendTo(that.wrapper);\n                    this._toggleOverflowAnchor();\n                }\n\n                that._tabIndex();\n\n                kendo.notify(that);\n            },\n\n            events: [\n                CLICK,\n                TOGGLE,\n                OPEN,\n                CLOSE,\n                OVERFLOW_OPEN,\n                OVERFLOW_CLOSE\n            ],\n\n            options: {\n                name: \"ToolBar\",\n                items: [],\n                resizable: true,\n                mobile: null,\n                navigateOnTab: false\n            },\n\n            addToGroup: function(button, groupName) {\n                var group;\n\n                if (!this._groups[groupName]) {\n                    group = this._groups[groupName] = new Group();\n                } else {\n                    group = this._groups[groupName];\n                }\n\n                group.add(button);\n                return group;\n            },\n\n            destroy: function() {\n                var that = this;\n\n                that.destroySplitButtons();\n                that.destroyDropDownButtons();\n\n                that.element.off(ns, \"a.k-button\");\n\n                that.userEvents.destroy();\n\n                if (that.options.resizable) {\n                    kendo.unbindResize(that._resizeHandler);\n                    that.overflowUserEvents.destroy();\n                    that.popup.element.off(ns, \"a.k-button\");\n                    that.popup.destroy();\n                }\n\n                Widget.fn.destroy.call(that);\n            },\n\n            destroySplitButtons: function() {\n                var that = this,\n                    splitButtonWrappers = that.element.find(DOT + SPLIT_BUTTON),\n                    item;\n\n\n                splitButtonWrappers.each(function(idx, element) {\n                    item = that._getItem(element);\n\n                    if (item && item.type === SPLITBUTTON) {\n                        item = item.toolbar;\n                    }\n\n                    if (item && item.splitButton && item.splitButton.destroy) {\n                        item.splitButton.destroy();\n                        $(element).remove();\n                    }\n                });\n            },\n\n            destroyDropDownButtons: function() {\n                var that = this,\n                    dropDownButtons = that.element.find(DOT + MENU_BUTTON),\n                    item;\n\n\n                    dropDownButtons.each(function(idx, element) {\n                    item = that._getItem(element);\n\n                    if (item && item.type === DROPDOWNBUTTON) {\n                        item = item.toolbar;\n                    }\n\n                    if (item && item.dropDownButton && item.dropDownButton.destroy) {\n                        item.dropDownButton.destroy();\n                        $(element).remove();\n                    }\n                });\n            },\n\n            add: function(options) {\n                var component = components[options.type],\n                    template = options.template,\n                    tool, that = this,\n                    itemClasses = that.isMobile ? NOTHING : \"k-item\",\n                    overflowTemplate = options.overflowTemplate,\n                    overflowTool, inputsInTemplate;\n\n                $.extend(options, {\n                    uid: kendo.guid(),\n                    animation: that.animation,\n                    mobile: that.isMobile,\n                    rootUid: that.uid\n                });\n\n                if (options.menuButtons) {\n                    for (var i = 0; i < options.menuButtons.length; i++) {\n                        $.extend(options.menuButtons[i], {\n                            uid: kendo.guid()\n                        });\n                    }\n                }\n\n                if ((template && !overflowTemplate) || options.type === SPACER) {\n                    options.overflow = OVERFLOW_NEVER;\n                } else if (!options.overflow) {\n                    options.overflow = OVERFLOW_AUTO;\n                }\n\n                //add the command in the overflow popup\n                if (options.overflow !== OVERFLOW_NEVER && that.options.resizable) {\n                    if (overflowTemplate) { //template command\n                         overflowTool = new OverflowTemplateItem(overflowTemplate, options, that);\n                    } else if (component) { //build-in command\n                        overflowTool = new component.overflow(options, that);\n                        overflowTool.element.addClass(itemClasses);\n                    }\n\n                    if (overflowTool) {\n                        if (options.overflow === OVERFLOW_AUTO) {\n                            overflowTool.overflowHidden();\n                        }\n\n                        overflowTool.element.appendTo(that.popup.container);\n                        that.angular(\"compile\", function() {\n                            return { elements: overflowTool.element.get() };\n                        });\n                    }\n                }\n\n                //add the command in the toolbar container\n                if (options.overflow !== OVERFLOW_ALWAYS) {\n                    if (template) { //template command\n                        tool = new TemplateItem(template, options, that);\n                        inputsInTemplate = tool.element.find(INPUT + COMMA + SELECT);\n\n                        if (!this.options.navigateOnTab && inputsInTemplate.length > 0) {\n                            tool.element.attr(TABINDEX, 0);\n                            inputsInTemplate.attr(TABINDEX, -1);\n                        }\n                    } else if (component) { //build-in command\n                        tool = new component.toolbar(options, that);\n                    }\n\n                    if (tool) {\n                        tool.element.appendTo(that.element);\n\n                        that.angular(\"compile\", function() {\n                            return { elements: tool.element.get() };\n                        });\n                    }\n                }\n            },\n\n            _getItem: function(candidate) {\n                var element,\n                    toolbarItem,\n                    overflowItem,\n                    isResizable = this.options.resizable,\n                    type;\n\n                //find toolbar item\n                element = this.element.find(candidate);\n\n                if (!element.length) {\n                    element = $(\"[data-role=\\\"buttonmenu\\\"]\").find(candidate);\n                }\n\n                type = element.length ? element.data(\"type\") : NOTHING;\n                toolbarItem = element.data(type);\n\n                if (toolbarItem && isResizable) {\n\n                        overflowItem = toolbarItem.twin();\n                } else if (isResizable) { //find overflow item\n                    element = this.popup.element.find(candidate);\n                    type = element.length ? element.data(\"type\") : NOTHING;\n                    overflowItem = element.data(type);\n\n                    if (type === TEXT_ITEM) {\n                        element = element.parent(DOT + MENU_BUTTON);\n                        type = \"dropDownButton\";\n                        overflowItem = element.data(type);\n                    }\n\n                    if (overflowItem && overflowItem.main && type !== TEXT_ITEM) {\n                        element = element.parent(DOT + SPLIT_BUTTON);\n                        type = \"splitButton\";\n                        overflowItem = element.data(type);\n                    }\n                }\n\n                return {\n                    type: type,\n                    toolbar: toolbarItem,\n                    overflow: overflowItem\n                };\n            },\n\n            remove: function(candidate) {\n                var item = this._getItem(candidate);\n\n                if (item.toolbar) { item.toolbar.remove(); }\n                if (item.overflow) { item.overflow.remove(); }\n\n                this.resize(true);\n            },\n\n            hide: function(candidate) {\n                var item = this._getItem(candidate);\n                var buttonGroupInstance;\n\n                if (item.toolbar) {\n                    if (item.toolbar.options.type === BUTTON && item.toolbar.options.isChild) {\n                        buttonGroupInstance = item.toolbar.getParentGroup();\n\n                        item.toolbar.hide();\n\n                        if (buttonGroupInstance) {\n                            buttonGroupInstance.refresh();\n                        }\n                    } else if (!item.toolbar.options.hidden) {\n                        item.toolbar.hide();\n                    }\n                }\n\n                if (item.overflow) {\n                    if (item.overflow.options.type === BUTTON && item.overflow.options.isChild) {\n                        buttonGroupInstance = item.overflow.getParentGroup();\n\n                        item.overflow.hide();\n\n                        if (buttonGroupInstance) {\n                            buttonGroupInstance.refresh();\n                        }\n                    } else if (!item.overflow.options.hidden) {\n                        item.overflow.hide();\n                    }\n                }\n\n                this.resize(true);\n            },\n\n            show: function(candidate) {\n                var item = this._getItem(candidate);\n                var buttonGroupInstance;\n\n                if (item.toolbar) {\n                    if (item.toolbar.options.type === BUTTON && item.toolbar.options.isChild) {\n                        buttonGroupInstance = item.toolbar.getParentGroup();\n                        item.toolbar.show();\n\n                        if (buttonGroupInstance) {\n                            buttonGroupInstance.refresh();\n                        }\n                    } else if (item.toolbar.options.hidden) {\n                        item.toolbar.show();\n                    }\n                }\n\n                if (item.overflow) {\n                    if (item.overflow.options.type === BUTTON && item.overflow.options.isChild) {\n                        buttonGroupInstance = item.overflow.getParentGroup();\n\n                        item.toolbar.show();\n\n                        if (buttonGroupInstance) {\n                            buttonGroupInstance.refresh();\n                        }\n                    } else if (item.overflow.options.hidden) {\n                        item.overflow.show();\n                    }\n                }\n\n                this.resize(true);\n            },\n\n            enable: function(element, enable) {\n                var item = this._getItem(element);\n\n                if (typeof enable == \"undefined\") {\n                    enable = true;\n                }\n\n                if (item.toolbar) { item.toolbar.enable(enable, item.element); }\n                if (item.overflow) { item.overflow.enable(enable); }\n            },\n\n            getSelectedFromGroup: function(groupName) {\n                return this.element.find(DOT + TOGGLE_BUTTON + \"[data-group='\" + groupName + \"']\").filter(DOT + STATE_SELECTED);\n            },\n\n            toggle: function(button, checked) {\n                var element = $(button),\n                    item = element.data(BUTTON);\n\n                if (item.options.togglable) {\n                    if (checked === undefined) {\n                        checked = true;\n                    }\n\n                    item.toggle(checked, true);\n                }\n            },\n\n            _renderOverflow: function() {\n                var that = this,\n                    overflowContainer = components.overflowContainer,\n                    isRtl = that._isRtl,\n                    horizontalDirection = isRtl ? \"left\" : \"right\";\n\n                that.overflowAnchor = $(components.overflowAnchor).addClass(KBUTTON);\n\n                that.element.append(that.overflowAnchor);\n\n                if (that.isMobile) {\n                    that.overflowAnchor.append('<span class=\"km-icon km-more\"></span>');\n                    overflowContainer = actionSheetWrap(overflowContainer);\n                } else {\n                    that.overflowAnchor.append('<span class=\"k-icon k-i-more-vertical\"></span>');\n                }\n\n                that.popup = new kendo.ui.Popup(overflowContainer, {\n                    origin: \"bottom \" + horizontalDirection,\n                    position: \"top \" + horizontalDirection,\n                    anchor: that.overflowAnchor,\n                    isRtl: isRtl,\n                    animation: that.animation,\n                    appendTo: that.isMobile ? $(that.isMobile).children(\".km-pane\") : null,\n                    copyAnchorStyles: false,\n                    open: function(e) {\n                        var wrapper = kendo.wrap(that.popup.element)\n                            .addClass(OVERFLOW_WRAPPER);\n\n                        if (!that.isMobile) {\n                            wrapper.css(\"margin-left\", (isRtl ? -1 : 1) * ((outerWidth(wrapper) - wrapper.width()) / 2 + 1));\n                        } else {\n                            that.popup.container.css(\"max-height\", (parseFloat($(\".km-content:visible\").innerHeight()) - 15) + \"px\");\n                        }\n\n                        if (that.trigger(OVERFLOW_OPEN)) {\n                            e.preventDefault();\n                        }\n                    },\n                    activate: function() {\n                        this.element.find(KENDO_FOCUSABLE).first().trigger(FOCUS);\n                    },\n                    close: function(e) {\n                        if (that.trigger(OVERFLOW_CLOSE)) {\n                            e.preventDefault();\n                        }\n\n                        this.element.trigger(FOCUS);\n                    }\n                });\n\n                that.popup.element.on(KEYDOWN + ns, DOT + KBUTTON, function(e) {\n                    var target = $(e.target),\n                        li = target.parent(),\n                        isComplexTool = li.is(DOT + BUTTON_GROUP) || li.is(DOT + SPLIT_BUTTON),\n                        element;\n\n                    e.preventDefault();\n\n                    if (e.keyCode === keys.ESC || e.keyCode === keys.TAB || (e.altKey && e.keyCode === keys.UP)) {\n                        that._toggleOverflow();\n                        that.overflowAnchor.trigger(FOCUS);\n                    } else if (e.keyCode === keys.DOWN) {\n                        element = !isComplexTool || (isComplexTool && target.is(\":last-child\")) || (isComplexTool && !target.next().is(KENDO_FOCUSABLE)) ? li : target;\n                        findFocusableSibling(element, NEXT).trigger(FOCUS);\n                    } else if (e.keyCode === keys.UP) {\n                        element = !isComplexTool || (isComplexTool && target.is(\":first-child\")) || (isComplexTool && !target.prev().is(KENDO_FOCUSABLE)) ? li : target;\n                        findFocusableSibling(element, PREV).trigger(FOCUS);\n                    } else if ((e.keyCode === keys.SPACEBAR || e.keyCode === keys.ENTER) && !$(e.target).is(DOT + STATE_DISABLED)) {\n                        that.userEvents.trigger(TAP, { target: $(e.target) });\n                        that.overflowAnchor.trigger(FOCUS);\n                    } else if (e.keyCode === keys.HOME) {\n                        li.parent().find(KENDO_FOCUSABLE).first().trigger(FOCUS);\n                    } else if (e.keyCode === keys.END) {\n                        li.parent().find(KENDO_FOCUSABLE).last().trigger(FOCUS);\n                    }\n                });\n\n                if (that.isMobile) {\n                    that.popup.container = that.popup.element.find(DOT + OVERFLOW_CONTAINER);\n                } else {\n                    that.popup.container = that.popup.element;\n                }\n\n                that.popup.container.attr(KENDO_UID_ATTR, this.uid);\n            },\n\n            _toggleOverflowAnchor: function() {\n                var hasVisibleChildren = false;\n                var paddingEnd = this._isRtl ? \"padding-left\" : \"padding-right\";\n\n                if (this.options.mobile) {\n                    hasVisibleChildren = this.popup.element.find(DOT + OVERFLOW_CONTAINER).children(\":not(.\" + OVERFLOW_HIDDEN + \", .\" + POPUP + \")\").length > 0;\n                } else {\n                    hasVisibleChildren = this.popup.element.children(\":not(.\" + OVERFLOW_HIDDEN + \", .\" + POPUP + \")\").length > 0;\n                }\n\n                if (hasVisibleChildren) {\n                    this.overflowAnchor.css({\n                        visibility: \"visible\",\n                        width: NOTHING\n                    });\n                    this.wrapper.css(paddingEnd, this.overflowAnchor.outerWidth(true));\n                } else {\n                    this.overflowAnchor.css({\n                        visibility: HIDDEN,\n                        width: \"1px\"\n                    });\n                    this.wrapper.css(paddingEnd, NOTHING);\n                }\n            },\n\n            _buttonClick: function(e) {\n                var that = this,\n                    target = $(e.target),\n                    item, handler, eventData, urlTarget,\n                    templateFocusable;\n\n                e.preventDefault();\n\n                if (target.hasClass(MENU_BUTTON) || target.hasClass(OVERFLOW_ANCHOR)) {\n                    that._resetTabIndex(target);\n                    return;\n                } else if (target.hasClass(SPLIT_BUTTON_ARROW)) {\n                    that._resetTabIndex(target.prev());\n                    return;\n                } else if (target.hasClass(TEMPLATE_ITEM)) {\n                    templateFocusable = target.find(INPUT + COMMA + SELECT + COMMA + DOT + DROPDOWNLIST);\n\n                    if (templateFocusable.length > 0) {\n                        that._resetTabIndex(templateFocusable.first());\n                    }\n\n                    return;\n                }\n\n                if (!target.data(SPLITBUTTON)) {\n                    target = $(e.target).closest(DOT + KBUTTON + COMMA + DOT + MENU_LINK, that.element);\n                }\n\n                item = target.data(BUTTON);\n\n                if (item && !target.hasClass(MENU_ITEM)) {\n                    that._resetTabIndex(target);\n                }\n\n                if (!item && that.popup) {\n                    target = $(e.target).closest(DOT + OVERFLOW_BUTTON, that.popup.container);\n                    item = target.parent(\"li\").data(BUTTON);\n                }\n\n                if (!item || !item.options.enable) {\n                    return;\n                }\n\n                if (item.options.togglable) {\n                    handler = isFunction(item.toggleHandler) ? item.toggleHandler : null;\n\n                    item.toggle(!item.options.selected, true);\n                    eventData = { target: target, group: item.options.group, checked: item.options.selected, id: item.options.id, item: item };\n\n                    if (handler) { handler.call(that, eventData); }\n                    that.trigger(TOGGLE, eventData);\n                } else {\n                    handler = isFunction(item.clickHandler) ? item.clickHandler : null;\n                    eventData = { sender: that, target: target, id: item.options.id, item: item };\n\n                    if (handler) { handler.call(that, eventData); }\n                    that.trigger(CLICK, eventData);\n                }\n\n                if (item.options.url) {\n                    if (item.options.attributes && item.options.attributes.target) {\n                        urlTarget = item.options.attributes.target;\n                    }\n                    window.open(item.options.url, urlTarget || \"_self\");\n                }\n\n                if (target.hasClass(OVERFLOW_BUTTON)) {\n                    that.popup.close();\n                }\n            },\n\n            _focusOut: function(e) {\n                this.wrapper.find(DOT + KBUTTON + DOT + KFOCUS).removeClass(KFOCUS);\n            },\n\n            _focusIn: function(e) {\n                var target = $(e.target);\n\n                if (target.closest(DOT + KBUTTON).length > 0) {\n                    target.closest(DOT + KBUTTON).addClass(KFOCUS);\n                }\n            },\n\n            _keydown: function(e) {\n                var target = $(e.target),\n                    keyCode = e.keyCode,\n                    items = this._getItems(),\n                    direction = this._isRtl ? -1 : 1,\n                    templateItem = target.closest(DOT + TEMPLATE_ITEM),\n                    last, next, innerFocusable, innerWidget, widgetInstance;\n\n                if (e.altKey && keyCode === keys.DOWN) {\n                    var isOverflowAnchor = $(document.activeElement).is(DOT + OVERFLOW_ANCHOR);\n\n                    if (isOverflowAnchor) {\n                        this._toggleOverflow();\n                    }\n\n                    return;\n                }\n\n                if (!this.options.navigateOnTab && keyCode === keys.ENTER && target.hasClass(TEMPLATE_ITEM)) {\n                    innerFocusable = target.find(KENDO_FOCUSABLE + \":not('\" + DOT + INPUT_BUTTON + \"')\" + COMMA + DOT + DROPDOWNLIST);\n\n                    if (innerFocusable.length > 0) {\n                        target.attr(TABINDEX, -1);\n\n                        innerFocusable.attr(TABINDEX, 0);\n                        innerFocusable.first().trigger(FOCUS);\n                    }\n\n                    return;\n                } else if (!this.options.navigateOnTab && keyCode === keys.ESC && templateItem.length > 0) {\n                    innerWidget = templateItem.find(\"[data-role]\");\n                    innerFocusable = templateItem.find(KENDO_FOCUSABLE + \":not('\" + DOT + INPUT_BUTTON + \"')\" + COMMA + DOT + DROPDOWNLIST);\n\n                    if (innerWidget.length > 0) {\n                        widgetInstance = kendo.widgetInstance(innerWidget);\n\n                        if (widgetInstance) {\n                            if (widgetInstance.popup && widgetInstance.popup.visible()) {\n                                return;\n                            } else {\n                                templateItem.attr(TABINDEX, 0);\n                                templateItem.trigger(FOCUS);\n                                templateItem.find(KENDO_FOCUSABLE).attr(TABINDEX, -1);\n                            }\n                        }\n                    }\n\n                    if (innerFocusable.length > 0) {\n                        templateItem.attr(TABINDEX, 0);\n                        templateItem.trigger(FOCUS);\n                        innerFocusable.attr(TABINDEX, -1);\n                    }\n\n                    return;\n                } else if ((keyCode === keys.SPACEBAR || keyCode === keys.ENTER) && !target.is(INPUT + COMMA + CHECKBOX + COMMA + BUTTON)) {\n                    if (keyCode === keys.SPACEBAR) {\n                        e.preventDefault(); //prevent spacebar to scroll the page down\n                        this.userEvents.trigger(TAP, { target: target });\n                    }\n\n                    return;\n                }\n\n                if (keyCode === keys.HOME) {\n                    if (target.is(DOT + DROPDOWNLIST) || target.is(INPUT)) {\n                        return;\n                    }\n\n                    this._resetTabIndex(items.first());\n                    items.first().trigger(FOCUS);\n                    e.preventDefault();\n                } else if (keyCode === keys.END) {\n                    if (target.is(DOT + DROPDOWNLIST) || target.is(INPUT)) {\n                        return;\n                    }\n\n                    last = items.last();\n\n                    if (last.width() === 0) {\n                        last = items.eq(items.length - 2);\n                    }\n\n                    this._resetTabIndex(last);\n                    last.trigger(FOCUS);\n                    e.preventDefault();\n                } else if (!this.options.navigateOnTab && keyCode === keys.RIGHT && !target.is(INPUT + \":not([type=file])\" + COMMA + SELECT + COMMA + DOT + DROPDOWNLIST + COMMA + DOT + COLORPICKER) && this._getNextElement(e.target, 1 * direction)) {\n                    next = $(this._getNextElement(e.target, 1 * direction));\n                    this._resetTabIndex(next);\n                    next.trigger(FOCUS);\n\n                    e.preventDefault();\n                } else if (!this.options.navigateOnTab && keyCode === keys.LEFT && !target.is(INPUT + \":not([type=file])\" + COMMA + SELECT + COMMA + EMPTY + DOT + DROPDOWNLIST + COMMA + DOT + COLORPICKER) && this._getNextElement(e.target, -1 * direction)) {\n                    next = $(this._getNextElement(e.target, -1 * direction));\n                    this._resetTabIndex(next);\n                    next.trigger(FOCUS);\n\n                    e.preventDefault();\n                }\n            },\n\n            _getNextElement: function(item, direction) {\n                var items = this._getItems(),\n                    itemIndex = items.index(item) === -1 ? items.index(item.parentElement) : items.index(item),\n                    focusableItem = items[itemIndex + direction];\n\n                if (!focusableItem) {\n                    if (direction === -1) {\n                        focusableItem = items.last();\n                    } else {\n                        focusableItem = items.first();\n                    }\n                }\n\n                return focusableItem;\n            },\n\n            _getItems: function() {\n                return this.wrapper.find(KENDO_FOCUSABLE + COMMA + DOT + TEMPLATE_ITEM + COMMA + DOT + OVERFLOW_ANCHOR + COMMA + DOT + \"k-switch\").filter(function() {\n                    var current = $(this);\n\n                    if (current.hasClass(\"k-hidden\")) {\n                        return false;\n                    } else if (current.hasClass(OVERFLOW_ANCHOR) && current.css(\"visibility\") === HIDDEN) {\n                        return false;\n                    } else if (current.hasClass(TEMPLATE_ITEM) && current.find(DOT + \"k-picker\" + COMMA + DOT + \"k-input\").length === 0) {\n                        return false;\n                    } else if (!current.hasClass(TEMPLATE_ITEM) && current.closest(DOT + TEMPLATE_ITEM).length > 0) {\n                        return false;\n                    } else if (current.hasClass(INPUT_BUTTON) || current.hasClass(SPLIT_BUTTON_ARROW)) {\n                        return false;\n                    }\n\n                    return true;\n                });\n            },\n\n            _toggle: function(e) {\n                var splitButton = $(e.target).closest(DOT + SPLIT_BUTTON).data(\"splitButton\");\n\n                e.preventDefault();\n\n                if (!splitButton.options.enable) {\n                    return;\n                }\n\n                splitButton.toggle();\n            },\n\n            _toggleOverflow: function() {\n                this.popup.toggle();\n            },\n\n            _resize: function(e) {\n                var containerWidth = e.width;\n\n                if (!this.options.resizable) {\n                    return;\n                }\n\n                this.popup.close();\n\n                this._shrink(containerWidth);\n                this._stretch(containerWidth);\n\n                this._markVisibles();\n\n                this._toggleOverflowAnchor();\n            },\n\n            _childrenWidth: function() {\n                var childrenWidth = 0;\n                var gap = parseInt(this.element.css('gap'), 10) || 0;\n\n                this.element.children(\":visible:not(\" + DOT + SPACER_CLASS + \")\").each(function() {\n                    childrenWidth += outerWidth($(this), true) + gap;\n                });\n\n                return Math.ceil(childrenWidth);\n            },\n\n            _shrink: function(containerWidth) {\n                var commandElement,\n                    visibleCommands,\n                    activeElement;\n\n                if (containerWidth < this._childrenWidth()) {\n                    visibleCommands = this.element.children(\":visible:not([data-overflow='never'], .\" + OVERFLOW_ANCHOR + \")\");\n\n                    for (var i = visibleCommands.length - 1; i >= 0; i--) {\n                        commandElement = visibleCommands.eq(i);\n\n                        if (containerWidth > this._childrenWidth()) {\n                            break;\n                        } else {\n                            activeElement = commandElement.find(\"[tabindex=0]\");\n\n                            if (activeElement.length > 0) {\n                                activeElement.attr(TABINDEX, -1);\n                                this.element.children(DOT + OVERFLOW_ANCHOR).attr(TABINDEX, 0);\n                            }\n\n                            this._hideItem(commandElement);\n                        }\n                    }\n                }\n            },\n\n            _stretch: function(containerWidth) {\n                var commandElement,\n                    hiddenCommands;\n\n                if (containerWidth > this._childrenWidth()) {\n                    hiddenCommands = this.element.children(DOT + STATE_HIDDEN + \":not(\" + DOT + FORCE_HIDDEN + \")\");\n\n                    for (var i = 0; i < hiddenCommands.length; i++) {\n                        commandElement = hiddenCommands.eq(i);\n                        if (containerWidth < this._childrenWidth() || !this._showItem(commandElement, containerWidth)) {\n                            break;\n                        }\n                    }\n                }\n            },\n\n            _hideItem: function(item) {\n                item.addClass(STATE_HIDDEN);\n\n                if (this.popup) {\n                    this.popup.container\n                        .find(\">li[data-uid='\" + item.data(UID) + \"']\")\n                        .removeClass(OVERFLOW_HIDDEN);\n                }\n            },\n\n            _showItem: function(item, containerWidth) {\n                var gap = parseInt(this.element.css('gap'), 10) || 0;\n                // From jquery.outerWidth docs:\n                //  > jQuery will attempt to temporarily show and then re-hide an element\n                //  > in order to measure its dimensions, but this is unreliable\n                // Thus we show and hide the item\n                item.removeClass(STATE_HIDDEN);\n                var itemOuterWidth = outerWidth(item, true) + gap;\n                item.addClass(STATE_HIDDEN);\n\n                if (item.length && containerWidth > this._childrenWidth() + itemOuterWidth) {\n                    item.removeClass(STATE_HIDDEN);\n\n                    if (this.options.navigateOnTab !== true) {\n                        item.find(KENDO_FOCUSABLE).attr(TABINDEX, -1);\n                    }\n\n                    if (this.popup) {\n                        this.popup.container\n                            .find(\">li[data-uid='\" + item.data(UID) + \"']\")\n                            .addClass(OVERFLOW_HIDDEN);\n                    }\n\n                    return true;\n                }\n\n                return false;\n            },\n\n            _markVisibles: function() {\n                var overflowItems = this.popup.container.children(),\n                    toolbarItems = this.element.children(\":not(\" + DOT + OVERFLOW_ANCHOR + \")\"),\n                    visibleOverflowItems = overflowItems.filter(\":not(\" + DOT + OVERFLOW_HIDDEN + \")\"),\n                    visibleToolbarItems = toolbarItems.filter(\":visible\");\n\n                overflowItems.add(toolbarItems).removeClass(FIRST_TOOLBAR_VISIBLE + EMPTY + LAST_TOOLBAR_VISIBLE);\n                visibleOverflowItems.first().add(visibleToolbarItems.first()).addClass(FIRST_TOOLBAR_VISIBLE);\n                visibleOverflowItems.last().add(visibleToolbarItems.last()).addClass(LAST_TOOLBAR_VISIBLE);\n            },\n\n            _resetTabIndex: function(toFocus) {\n                if (this.options.navigateOnTab !== true) {\n                    this.wrapper.find(KENDO_FOCUSABLE).attr(TABINDEX, -1);\n                    toFocus.attr(TABINDEX, 0);\n                }\n            },\n\n            _tabIndex: function() {\n                var focusableItems = this.wrapper.find(KENDO_FOCUSABLE + \":not('[tabindex=-1]')\"),\n                    firstFocusable = focusableItems.first();\n\n                if (this.options.navigateOnTab !== true) {\n                    focusableItems.attr(TABINDEX, -1);\n                    firstFocusable.attr(TABINDEX, 0);\n                }\n            }\n        });\n\n    kendo.ui.plugin(ToolBar);\n})(window.kendo.jQuery);\n\nreturn window.kendo;\n\n}, typeof define == 'function' && define.amd ? define : function(a1, a2, a3) { (a3 || a2)(); });\n\n"],"names":["define","__meta__","id","name","category","description","depends","$","window","kendo","jQuery","undefined","Class","ui","Widget","isFunction","keys","outerWidth","_outerWidth","ns","TOOLBAR","KBUTTON","OVERFLOW_BUTTON","TOGGLE_BUTTON","BUTTON_GROUP","SPLIT_BUTTON","MENU_BUTTON","KSEPARATOR","SPACER_CLASS","POPUP","RESIZABLE_TOOLBAR","STATE_SELECTED","STATE_DISABLED","STATE_HIDDEN","FORCE_HIDDEN","GROUP_START","GROUP_END","MENU_LINK","MENU_ITEM","OVERFLOW_GROUP","OVERFLOW_HIDDEN","OVERFLOW_ANCHOR","OVERFLOW_CONTAINER","OVERFLOW_WRAPPER","FIRST_TOOLBAR_VISIBLE","LAST_TOOLBAR_VISIBLE","SPLIT_BUTTON_ARROW","TEMPLATE_ITEM","DROPDOWNLIST","COLORPICKER","INPUT_BUTTON","KFOCUS","ARIA_DISABLED","ARIA_PRESSED","ARIA_LEBEL","CLICK","TOGGLE","OPEN","CLOSE","FOCUS","KEYDOWN","TAP","SPACER","BOTH","PRIMARY","HREF","ROLE","BUTTON","SPLITBUTTON","DROPDOWNBUTTON","SEPARATOR","OVERFLOW","NEXT","PREV","TABINDEX","TEMPLATE","INPUT","SELECT","CHECKBOX","HIDDEN","GROUP","KENDO_FOCUSABLE","OVERFLOW_OPEN","OVERFLOW_CLOSE","OVERFLOW_NEVER","OVERFLOW_AUTO","OVERFLOW_ALWAYS","OPTION_LIST_SUFFIX","KENDO_UID_ATTR","attr","POPUP_ITEM_TEMPLATE","MENU_LINK_SPAN","MENU_LINK_A","EMPTY","NOTHING","TEXT_ITEM","DOT","COMMA","ID","UID","components","toolbar","overflowAnchor","overflowContainer","Item","registerComponent","overflow","extend","addOverflowAttr","this","element","options","addUidAttr","uid","addIdAttr","addOverflowIdAttr","attributes","classes","class","addClass","show","removeClass","hidden","hide","overflowHidden","remove","enable","isEnabled","toggleClass","twin","splitContainerId","find","data","type","resizable","popup","BareItem","init","Button","useButtonTag","primary","themeColor","togglable","toggle","selected","url","mobile","group","addToGroup","click","clickHandler","toggleHandler","showIcon","showText","state","propagate","select","getParentGroup","isChild","closest","ToolBarButton","fn","call","align","text","html","icon","spriteCssClass","imageUrl","renderButton","button","OverflowButton","_wrap","wrap","parent","ButtonGroup","createButtons","buttonConstructor","items","buttons","item","i","length","guid","appendTo","refresh","children","filter","first","last","ToolBarButtonGroup","buttonGroup","OverflowButtonGroup","ToolBarMenuButton","img","span","template","href","prependTo","ToolBarSplitButton","that","splitButton","SplitButton","_extend","menuButtons","wrapper","bind","_buttonClick","_close","_open","addMenuAttributes","ev","isDefaultPrevented","trigger","target","preventDefault","map","itemInstance","each","index","elmToRemove","destroy","mainButton","OverflowSplitButton","main","elements","add","ToolBarDropDownButton","dropDownButton","DropDownButton","OverflowTextItem","append","textItem","OverflowDropDownButton","ToolBarSeparator","separator","OverflowSeparator","ToolBarSpacer","TemplateItem","OverflowTemplateItem","toggleActive","e","is","actionSheetWrap","hasClass","preventClick","findFocusableSibling","dir","getSibling","next","prev","getter","candidate","Group","inArray","splice","tmp","ToolBar","_isRtl","support","isRtl","_groups","isMobile","animation","open","effects","_renderOverflow","overflowUserEvents","UserEvents","threshold","allowSelection","tap","_toggleOverflow","_resizeHandler","onResize","resize","_shrink","innerWidth","userEvents","document","documentElement","press","release","on","_keydown","_focusIn","_focusOut","_toggleOverflowAnchor","_tabIndex","notify","events","navigateOnTab","groupName","destroySplitButtons","destroyDropDownButtons","off","unbindResize","splitButtonWrappers","idx","_getItem","dropDownButtons","component","tool","itemClasses","overflowTemplate","overflowTool","inputsInTemplate","rootUid","container","angular","get","toolbarItem","overflowItem","isResizable","buttonGroupInstance","getSelectedFromGroup","checked","horizontalDirection","Popup","origin","position","anchor","copyAnchorStyles","css","width","parseFloat","innerHeight","activate","close","li","isComplexTool","keyCode","ESC","TAB","altKey","UP","DOWN","SPACEBAR","ENTER","HOME","END","hasVisibleChildren","paddingEnd","visibility","handler","eventData","urlTarget","templateFocusable","_resetTabIndex","sender","_getItems","direction","templateItem","innerFocusable","innerWidget","widgetInstance","isOverflowAnchor","activeElement","visible","eq","RIGHT","_getNextElement","LEFT","itemIndex","parentElement","focusableItem","current","_toggle","_resize","containerWidth","_stretch","_markVisibles","_childrenWidth","childrenWidth","gap","parseInt","Math","ceil","commandElement","visibleCommands","_hideItem","hiddenCommands","_showItem","itemOuterWidth","overflowItems","toolbarItems","visibleOverflowItems","visibleToolbarItems","toFocus","focusableItems","firstFocusable","plugin","amd","a1","a2","a3"],"mappings":"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"}